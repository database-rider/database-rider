dist: trusty
sudo: required
language: java
jdk: oraclejdk8
cache:
  directories:
  - "$HOME/.m2/repository"
services:
- docker
env:
  global:
  - secure: L0+cMc+bX+VRvSdu6FtZ05zpwI01I4zelMBARKfFgoBPWI/n7NiekeEDmlDLTuJFs/umemi71JF30bBLCFeY9ZpHdVfRrHt6i/NHeyH3Ex0C4TOhRPQS7fPT7MKVTkgmKMJRm5MpoqdpKEJvyk2N7KOzuLJXmCZL60MUTbdbu1cZ2WldNlvQX6nApV8P/rISD/OFxQBszyfaJFhOWsgvC9R9tlhcDjTPoqjxdaQx04LmW686s80MhEwvkwYxKJtz+KD1NHFrReXnKcHdvQ50+dcn8JgDfRrw52Th+zEiNwqzVKxh2diw/J8T/NHFxmiKNbni3XB6ZnXWzysB3ZFid79H0JAfR36ZPj6P2ny7Qd1HhFDpgd0+DmKZ/zeOHWD1w/l8N6RzSkx+m5rMwtlCYpM3wBxNeu10KT1Y5Nw4i1ZM8gKjkj8zQ4OAHCp5i/BCDkWTIqM32peWt+BQj0nGUo1a8DdVPAYt0wVPSwV9LjRr5fb3vh5ScZ+PDwIdMORky0DjUo6Zi7ObxSgXlCAROF6SvVsCjOF38G3AVV0S4hjC3I8F1QGvfi1CUtxAcZjaj++tAXlSmA9PVrrTl/8AzQJgSb9uSxNzBaflfayM3KS6ZGHKJTJSdaD305nuoGk1OBG5AZ5c6bJSRIxIPEfvZddwGUepNtFcfJW89HambfM=
  - secure: ClumGGkzurMUY4zDqxieYIER4RCI5TmkQs1qCDA8wGfdJYYwwF3+a1nzwF0nemk6eSVUeKjzrGv5H5pRlkVbXCt3C3OYSjhl9T+dVDXt8aAAu5K3xR0CZL/dEMM4Md5d94SHUa2yyg9P954CSgRUb+eb99B+v8PIzAXkIsW3bjOQ03tCq5CZtmQU388BrTr7liNoA3Mh2053OHdxAxvMBY8dAyFCuwF2TTNk8bKvOL0ed4caNKCPMvlil907flXpDKkkXzFCoo3Mo2UDi5VAZFSxRWHi9PrdV7x4tPQs4fBZaAaIOEbTpnjKItMZLs1CMH7l7ekLGZuYanq1hMH/LilUxBqziDT4JF9CfPdnTQGBdsUjH3ErE1ClQHsiRECc/9rE1nYRBLxwB9JCDDz0lUSU2zOKaQloBnfgK+aaQm1u3kk9GqQ85Yzvn7QTjSmatBqlBy/xNCpTUVhB0jGDr867hfD09M8YboyKMs7XN3nX/YQpW8wsgTNOO2yFhFfD+UHaR9QmYqXkXhxU3km3jJOaHcWqdeZu7fx4ocd9nAnn36xE3Q9mpb1W+sbFmiNOocuX7dEAYk44rNOtGoZBb8T7xnGdUwoFq7A8DGflo8x+6msHRqWORQtpfWZDUAViAL1V7WJVxzgA+Paxq40gWXJ38oNV3HJXbmKT4eUvRjY=
  - secure: Z8xaz5hSw2O6zAWinc5/b8AeQrqNLfoRc3ivx7Q2TcpxWnJ2jBfa8FaNGjiTYHbSF6ctElv1aM7TlWkyTlQPjlPbLIOWokum7XLGS0nkklBc7ZsyR90XDiUOwJk2A5zLclE6IKZD1FCiFv/cZkWI/OIBYYSrpg6yrOUp38xghTbcHhfEQBErXonp8gjI6atc1OxJyBYFwVYETgE2Hl7ktQ6JluyXY7tFTj8bxDuCAqW+/kvlBAyipg+YSQcCEFQ7pY++tH2n5v0GK/kRMac9cxG70yxoh3aOsE43Q5lmLrXg8ebcRYLaTBh0RMxrNnGJb44s3+hJx4C2PVAAGCUO5TmUBl7j0O3l+cCqJm6ida+sBPBdQJexZeyXKhzPy+0JP6byQk4WENue3H3pg35q3e26UJnIGkq9rzB3aQtfB/ydLTHjHgABf1IBAU23TPL7zKCFEYevEMYHo/jr+aWrV2mu7dSyYaR953nKIbpAz0zUxTgEsmcYUIf3xkNQxVH0MMOP0t1RDqoi1VTvYmIX9aAXU7OU6hDqkEPBoxXoy+hTFBS7L2dJR4TSJyEVnhTDlN+zM+4u0O6UxxuufTyZL8lJHbZtEvETz5qdv6Q+GA3qcfURtMnc5B9sX7REW4bac5xbeNMuBvQB8IK7eHJsECqrn6sxgJPxZvH+a6cgjrw=
  - secure: VdfbvP0LGmtRUll7P7rzfbDpw182Ma/hwxn3N68QKlaEnn+nXBceOYFhfCkbiNX8YX//qdKoZOLVdbksirtEMQpRQ4VsruLN/vbaY/yNtcGHqtOQMTlZXpapPdRwR3U/AybIPIplNyJ5rHCzQxrPQhNxcCQJYyH7vY1nuuSYUULvH8kTnUg7OktAV/db86ZkCsLHYOSd0XxUIG+ADg7AwAptSqLKXKiW0lIwMFsJlzlojtElcOLsgBSaENmK8pwAenLkw7r8yBa5/5uThxrG6lDEFFLus9H3mXlyF2hqB7356BF2uCHVxXaKb/HqIBlsQ67ZBTOAkOmaRROHcjnsj3+k09l8cAvRfMxnlFLkIPM2dxz/fGUSGs+WhsBjq5OQTdCaYpwOLQUmHCrykL5ztLLFVQPWsU9BhL8TgFMjAJwmyW0wdL29JS9onK2yj42hb+BeF2CzQQYL9ZtaCC9xXYcrn35Q+dH/Dd5Vq4jLZh0pkJzzZuDtDWXR9oDEbzcVa/OqsDIV1jJwOzd//tmoIUzllXiYN2RPHrVXv3a8CH+zUoHPWknfBHLHoO7wIpRi01XYwmcvB+OWHMMyCmpNkrpWb17FU9LAAr7g8p6cJZy28p147bOqjMnt0ekiSdVXhqAFI3uaEzydpluD6mYpebcX9ePty7U5jsZ2+QfZ9Cg=
  - secure: TYkeV9ZkRuX7ZIgf2rtQWBod6s6inQiQki5fjAmedkVsx/jhl4ndu6jnIdG7Cl5Wa2AuyIEUzUn4KgYiPUg/4ZRUYDoSe6Eah1Iw2LruAjTjnIzd0xf6n3e8wZ9aSMGIjx052MfzXXZJjbe3FS4BKaroMPi8/ckZa5cYDP8Buafuq1++7hCql99X2FvvHY6XtRe/Oya2ZNTFNvqD6HrIcvdaGysDpvsY3VBCUZ9ktWpOBnUJU7XxwbaBv8MCTJvqGTQhsVB+5UGjB7eXbPuMxPynlV4ojbhxUa48YTegc09YtziT74mYYWSbLourENxin4zcQ2KlsRviqgEyGRqxYmRk+D8DV0OJAlvF9KopNmo/FJiiZ13chC8iS/CjGsIgy0+3n+BO9qudF/OnZvTLLI3fKOwyjb0pfpJnsAhqCR7p37pqTvMzKxiMsXO6DduNThjbAhzbpnfCAYHOLDux7jcwKV6YTCtJCQfnv5cMy8zaw4qGYFGy363kTnKMdTWaNKkUU9Z+UiLpVzuxaHhPmGZu7dtzy4+qEDknW8k2hxbQh/HpowN8b/mvKC+3PNsxJcgpSjp87+zQnHBFsCdLyP7dQxWGqAIX4TGydAmAx8IywihtrovrXzk85PhR3h1vz7qs/62bQRimQ7AoUhzvf/Q3WVIC1B8mNDsDXdD4dZs=
before_script:
- git config --global user.name rmpestano
- git config --global user.email rmpestano@gmail.com
script:
- mvn install -DskipTests && mvn verify jacoco:report coveralls:report -Pcoverage surefire-report:report-only
  && python html2text.py target/site/surefire-report.html
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  mvn sonar:sonar -Psonar -Dsonar.organization=database-rider -Dsonar.host.url=https://sonarcloud.io
  -Dsonar.login=${SONAR_TOKEN} ; fi ;
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  cd rider-core && mvn -q cukedoctor:execute scm-publish:publish-scm -Pdocs ; fi ;
- if [[ $TRAVIS_COMMIT_MESSAGE == *"prepare release"* ]]; then
  cd rider-core && mvn -q cukedoctor:execute scm-publish:publish-scm -Pdocs -Prelease ; fi ;
after_script:
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  cd ../ && mvn deploy --settings settings.xml -DskipTests=true ; fi;
