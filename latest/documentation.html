<!doctype html>
<html lang="en">
 <head> 
  <meta charset="UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <meta name="generator" content="Asciidoctor 2.0.15"> 
  <title>Database Rider Documentation</title> 
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"> 
  <style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
  <style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style> 
 </head> 
 <body class="book"> 
  <div name="themes" id="themes" style="float:right;width:150px;font-size:10px;position:relative;top:0;right:0px"> 
   <b>Theme:&nbsp;</b> 
   <select style="width:100px;font-size:10px;" name="select" onchange="window.location.href = window.location.href.substring(0,window.location.href.indexOf('?')) + '?theme='+ this.value"> <option value="asciidoctor" selected>Asciidoctor</option> <option value="colony">Colony</option> <option value="foundation">Foundation</option> <option value="github">Github</option> <option value="iconic">Iconic</option> <option value="maker">Maker</option> <option value="rocket-panda">Rocket Panda</option> <option value="readthedocs">Read the Docs</option> <option value="rubygems">Rubygems</option> </select> 
  </div> 
  <div id="header"> 
   <h1>Database Rider Documentation</h1> 
   <div class="details"> 
    <span id="revnumber">version 1.44.1-SNAPSHOT</span> 
   </div> 
   <div id="toc" class="toc"> 
    <div id="toctitle">
      Table of Contents 
    </div> 
    <ul class="sectlevel1"> 
     <li><a href="#_introduction">1. <strong>Introduction</strong></a></li> 
     <li><a href="#Seeding-database">2. <strong>Seeding database</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_seed_database_with_dbunit_rule">2.1. Seed database with <code>DBUnit Rule</code></a></li> 
       <li><a href="#_seed_database_with_dbunit_interceptor">2.2. Seed database with <code>DBUnit Interceptor</code></a></li> 
       <li><a href="#_seed_database_with_junit_5_extension">2.3. Seed database with <code>JUnit 5 extension</code></a></li> 
       <li><a href="#_seeding_database_in_bdd_tests_with_rider_cucumber">2.4. Seeding database in BDD tests with <code>Rider Cucumber</code></a></li> 
      </ul> </li> 
     <li><a href="#DataSet-creation">3. <strong>DataSet creation</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_creating_a_yaml_dataset">3.1. Creating a <code>YAML</code> dataset</a></li> 
       <li><a href="#_creating_a_json_dataset">3.2. Creating a <code>JSON</code> dataset</a></li> 
       <li><a href="#_creating_a_xml_dataset">3.3. Creating a <code>XML</code> dataset</a></li> 
       <li><a href="#_creating_a_xls_dataset">3.4. Creating a <code>XLS</code> dataset</a></li> 
       <li><a href="#_creating_a_csv_dataset">3.5. Creating a <code>CSV</code> dataset</a></li> 
      </ul> </li> 
     <li><a href="#Configuration">4. <strong>Configuration</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_dataset_configuration">4.1. DataSet configuration</a></li> 
       <li><a href="#_dbunit_configuration">4.2. DBUnit configuration</a></li> 
      </ul> </li> 
     <li><a href="#DataSet-assertion">5. <strong>DataSet assertion</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_assertion_with_yml_dataset">5.1. Assertion with yml dataset</a></li> 
       <li><a href="#_assertion_with_regular_expression_in_expected_dataset">5.2. Assertion with regular expression in expected dataset</a></li> 
       <li><a href="#_database_assertion_with_seeding_before_test_execution">5.3. Database assertion with seeding before test execution</a></li> 
       <li><a href="#_failing_assertion">5.4. Failing assertion</a></li> 
       <li><a href="#_assertion_using_automatic_transaction">5.5. Assertion using automatic transaction</a></li> 
      </ul> </li> 
     <li><a href="#Dynamic-data-using-scritable-datasets">6. <strong>Dynamic data using scritable datasets</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_seed_database_with_groovy_script_in_dataset">6.1. Seed database with groovy script in dataset</a></li> 
       <li><a href="#_seed_database_with_javascript_in_dataset">6.2. Seed database with javascript in dataset</a></li> 
      </ul> </li> 
     <li><a href="#Database-connection-leak-detection">7. <strong>Database connection leak detection</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_detecting_connection_leak">7.1. Detecting connection leak</a></li> 
      </ul> </li> 
     <li><a href="#DataSet-export">8. <strong>DataSet export</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_export_dataset_with_exportdataset_annotation">8.1. Export dataset with <code>@ExportDataSet</code> annotation</a></li> 
       <li><a href="#_programmatic_export">8.2. Programmatic export</a></li> 
       <li><a href="#_configuration">8.3. Configuration</a></li> 
       <li><a href="#_export_using_dbunit_addon">8.4. Export using DBUnit Addon</a></li> 
      </ul> </li> 
     <li><a href="#MetaDataSet">9. <strong>MetaDataSet</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_class_level_metadataset">9.1. Class level metadataset</a></li> 
       <li><a href="#_method_level_metadaset">9.2. Method level metadaset</a></li> 
      </ul> </li> 
     <li><a href="#DataSet-merging">10. <strong>DataSet merging</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_merging_datasets">10.1. Merging datasets</a></li> 
      </ul> </li> 
     <li><a href="#DataSet-builder">11. <strong>DataSet builder</strong></a> 
      <ul class="sectlevel2"> 
       <li><a href="#_create_dataset_using_dataset_builder">11.1. Create dataset using dataset builder</a></li> 
       <li><a href="#_create_dataset_using_dataset_builder_with_columnvalues_syntax">11.2. Create dataset using dataset builder with <code>column…​values</code> syntax</a></li> 
      </ul> </li> 
    </ul> 
   </div> 
  </div> 
  <div id="content"> 
   <span style="float:right"> <input value="Filter..." onclick="this.value=''" title="Filter features by title" onblur="searchFeature(this.value);"> </span> 
   <div class="sect1"> 
    <h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. <strong>Introduction</strong></h2> 
    <div class="sectionbody"> 
     <div class="paragraph"> 
      <p><strong>Database Rider</strong> aims for bringing <a href="http://dbunit.sourceforge.net/" target="_blank" rel="noopener">DBUnit</a> closer to your JUnit tests so <strong>database testing will feel like a breeze!</strong>. Here are the main features:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p><a href="https://github.com/junit-team/junit4/wiki/Rules">JUnit rule</a> to integrate with DBUnit via annotations:</p> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Rule</span>
    <span class="directive">public</span> DBUnitRule dbUnitRule = DBUnitRule.instance(jdbcConnection);<i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">datasets/yml/users.yml</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> shouldSeedDataSet(){
        <span class="comment">//database is seed with users.yml dataset</span>
    }</code></pre> 
         </div> 
        </div> 
        <div class="colist arabic"> 
         <table> 
          <tbody> 
           <tr> 
            <td><i class="conum" data-value="1"></i><b>1</b></td> 
            <td>The rule depends on a JDBC connection.</td> 
           </tr> 
          </tbody> 
         </table> 
        </div> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider#cdi-module" target="_blank" rel="noopener">CDI integration</a> via interceptor to seed database without rule instantiation;</p> </li> 
       <li> <p>JSON, YAML, XML, XLS, and CSV support;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider#configuration" target="_blank" rel="noopener">Configuration</a> via annotations or yml files;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider#cucumber-module" target="_blank" rel="noopener">Cucumber</a> integration;</p> </li> 
       <li> <p>Multiple database support;</p> </li> 
       <li> <p>Date/time support in datasets;</p> </li> 
       <li> <p>Scriptable datasets with groovy and javascript;</p> </li> 
       <li> <p>Regular expressions in expected datasets;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider#junit-5" target="_blank" rel="noopener">JUnit 5</a> integration;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider#export-datasets" target="_blank" rel="noopener">DataSet export</a>;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider#8-leak-hunter" target="_blank" rel="noopener">Connection leak detection</a>;</p> </li> 
       <li> <p>Lot of <a href="https://github.com/database-rider/database-rider#examples" target="_blank" rel="noopener">examples</a>.</p> </li> 
      </ul> 
     </div> 
     <div class="paragraph"> 
      <p>The project is composed by 5 modules:</p> 
     </div> 
     <div class="ulist"> 
      <ul> 
       <li> <p><a href="https://github.com/database-rider/database-rider/tree/master/rider-core" target="_blank" rel="noopener">Core</a>: Contains the dataset executor and JUnit rule;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider/tree/master/rider-cdi" target="_blank" rel="noopener">CDI</a>: provides the DBUnit interceptor;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider/tree/master/rider-cucumber" target="_blank" rel="noopener">Cucumber</a>: a CDI aware cucumber runner;</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider/tree/master/rider-junit5" target="_blank" rel="noopener">JUnit5</a>: Comes with an <a href="http://junit.org/junit5/docs/current/user-guide/#extensions" target="_blank" rel="noopener">extension</a> for JUnit5.</p> </li> 
       <li> <p><a href="https://github.com/database-rider/database-rider/tree/master/rider-examples" target="_blank" rel="noopener">Examples module</a>.</p> </li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="Seeding-database"><a class="anchor" href="#Seeding-database"></a>2. <strong>Seeding database</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('Seeding-database');document.getElementById('hidden-Seeding-database').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-Seeding-database" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('Seeding-database');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to insert data into database before test execution<br> As a developer<br> I want to easily use DBUnit in JUnit tests.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="paragraph"> 
        <p>Database Rider brings <a href="http://dbunit.sourceforge.net/" target="_blank" rel="noopener">DBUnit</a> to your <a href="http://junit.org/junit4/">JUnit tests</a> by means of:</p> 
       </div> 
       <div class="ulist"> 
        <ul> 
         <li> <p><a href="https://github.com/junit-team/junit4/wiki/Rules" target="_blank" rel="noopener">JUnit rules</a> (for JUnit4 tests);</p> </li> 
         <li> <p><a href="https://docs.jboss.org/weld/reference/latest/en-US/html_single/#interceptors" target="_blank" rel="noopener">CDI interceptor</a> (for <code>CDI</code> based tests)</p> </li> 
         <li> <p><a href="http://junit.org/junit5/docs/current/user-guide/#extensions" target="_blank" rel="noopener">JUnit5 extension</a> (for JUnit5 tests).</p> </li> 
        </ul> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_seed_database_with_dbunit_rule"><a class="anchor" href="#_seed_database_with_dbunit_rule"></a>2.1. Seed database with <code>DBUnit Rule</code></h3> 
      <div class="paragraph"> 
       <p>JUnit4 integrates with DBUnit through a <a href="https://github.com/junit-team/junit4/wiki/Rules" target="_blank" rel="noopener">JUnit rule</a> called <code>DBUnitRule</code> which reads <strong>@Dataset</strong> annotations in order to prepare the database state using DBUnit behind the scenes.</p> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> The rule just needs a <a href="https://docs.oracle.com/javase/tutorial/jdbc/" target="_blank" rel="noopener">JDBC</a> connection in order to be created. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <h4 id="_dependencies" class="discrete"><strong>Dependencies</strong></h4> 
      <div class="paragraph"> 
       <p>To use it add the following maven dependency:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
   <span class="tag">&lt;groupId&gt;</span>com.github.database-rider<span class="tag">&lt;/groupId&gt;</span>
   <span class="tag">&lt;artifactId&gt;</span>rider-core<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.44.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
   <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following junit rules <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(JUnit4.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DatabaseRiderIt</span> {
        
    <span class="annotation">@Rule</span>
    <span class="directive">public</span> EntityManagerProvider emProvider = EntityManagerProvider.instance(<span class="string"><span class="delimiter">"</span><span class="content">rules-it</span><span class="delimiter">"</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> DBUnitRule dbUnitRule = DBUnitRule.instance(emProvider.connection()); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td><code>EntityManagerProvider</code> is a simple Junit rule that creates a JPA entityManager for each test. DBUnit rule don’t depend on EntityManagerProvider, it only needs a <strong>JDBC connection</strong>.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>DBUnit rule is responsible for reading <code>@DataSet</code> annotation and prepare the database for each test.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/yml/users.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 1
    NAME: "@realpestano"
  - ID: 2
    NAME: "@dbunit"
TWEET:
  - ID: abcdef12345
    CONTENT: "dbunit rules!"
    DATE: "[DAY,NOW]"
    USER_ID: 1
FOLLOWER:
  - ID: 1
    USER_ID: 1
    FOLLOWER_ID: 2</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">datasets/yml/users.yml</span><span class="delimiter">"</span></span>, useSequenceFiltering = <span class="predefined-constant">true</span>)
    <span class="directive">public</span> <span class="type">void</span> shouldSeedUserDataSet() {
        User user = (User) EntityManagerProvider.em().
                createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u join fetch u.tweets join fetch u.followers where u.id = 1</span><span class="delimiter">"</span></span>).getSingleResult();
        assertThat(user).isNotNull();
        assertThat(user.getId()).isEqualTo(<span class="integer">1</span>);
        assertThat(user.getTweets()).isNotNull().hasSize(<span class="integer">1</span>);
        Tweet tweet = user.getTweets().get(<span class="integer">0</span>);
        assertThat(tweet).isNotNull();
        <span class="predefined-type">Calendar</span> date = tweet.getDate();
        <span class="predefined-type">Calendar</span> now = <span class="predefined-type">Calendar</span>.getInstance();
        assertThat(date.get(<span class="predefined-type">Calendar</span>.DAY_OF_MONTH)).
                isEqualTo(now.get(<span class="predefined-type">Calendar</span>.DAY_OF_MONTH));
    }</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> Source code of the above example can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/DatabaseRiderIt.java/#L31" target="_blank" rel="noopener">found here</a>. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_seed_database_with_dbunit_interceptor"><a class="anchor" href="#_seed_database_with_dbunit_interceptor"></a>2.2. Seed database with <code>DBUnit Interceptor</code></h3> 
      <div class="paragraph"> 
       <p>DBUnit CDI<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> integration is done through a <a href="https://docs.jboss.org/weld/reference/latest/en-US/html_single/#interceptors" target="_blank" rel="noopener">CDI interceptor</a> which reads <code>@DataSet</code> to prepare database in CDI tests.</p> 
      </div> 
      <h4 id="_dependencies_2" class="discrete"><strong>Dependencies</strong></h4> 
      <div class="paragraph"> 
       <p>To use this module just add the following maven dependency:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
   <span class="tag">&lt;groupId&gt;</span>com.github.database-rider<span class="tag">&lt;/groupId&gt;</span>
   <span class="tag">&lt;artifactId&gt;</span>rider-cdi<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.44.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
   <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>DBUnit interceptor is enabled in your test beans.xml: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/META-INF/beans.xml 
           </div> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;beans</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://java.sun.com/xml/ns/javaee</span><span class="delimiter">"</span></span>
     <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
     <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
     <span class="tag">&lt;interceptors&gt;</span>
            <span class="tag">&lt;class&gt;</span>com.github.database.rider.cdi.DBUnitInterceptorImpl<span class="tag">&lt;/class&gt;</span>
     <span class="tag">&lt;/interceptors&gt;</span>
<span class="tag">&lt;/beans&gt;</span></code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock important"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>Your test itself must be a CDI bean to be intercepted. if you’re using <a href="https://deltaspike.apache.org/documentation/test-control.html" target="_blank" rel="noopener">Deltaspike test control</a> just enable the following property in <code>test/resources/META-INF/apache-deltaspike.properties</code>:</p> 
             </div> 
             <div class="listingblock"> 
              <div class="content"> 
               <pre>deltaspike.testcontrol.use_test_class_as_cdi_bean=true</pre> 
              </div> 
             </div> 
             <div class="admonitionblock important"> 
              <table> 
               <tbody> 
                <tr> 
                 <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
                 <td class="content"> When using above configuration the JUnit <code>@Before</code> will not work as expected, see <a href="https://lists.apache.org/thread.html/60ae2ade9ff8c5588a53a138b64c94e505455185358c21f663a5fd33@%3Cusers.deltaspike.apache.org%3E" target="_blank" rel="noopener">discussion here</a>. </td> 
                </tr> 
               </tbody> 
              </table> 
             </div> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/yml/users.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 1
    NAME: "@realpestano"
  - ID: 2
    NAME: "@dbunit"
TWEET:
  - ID: abcdef12345
    CONTENT: "dbunit rules!"
    USER_ID: 1
  - ID: abcdef12233
    CONTENT: "dbunit rules!"
    USER_ID: 2
  - ID: abcdef1343
    CONTENT: "CDI for the win!"
    USER_ID: 2
FOLLOWER:
  - ID: 1
    USER_ID: 1
    FOLLOWER_ID: 2</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(CdiTestRunner.class) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@DBUnitInterceptor</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/users.yml</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DBUnitCDIIt</span> {
    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">yml/users.yml</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> shouldSeedUserDataSetUsingCdiInterceptor() {
        <span class="predefined-type">List</span>&lt;User&gt; users = em.createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u order by u.id asc</span><span class="delimiter">"</span></span>).getResultList();
        User user1 = <span class="keyword">new</span> User(<span class="integer">1</span>);
        User user2 = <span class="keyword">new</span> User(<span class="integer">2</span>);
        Tweet tweetUser1 = <span class="keyword">new</span> Tweet();
        tweetUser1.setId(<span class="string"><span class="delimiter">"</span><span class="content">abcdef12345</span><span class="delimiter">"</span></span>);
        assertThat(users).isNotNull().hasSize(<span class="integer">2</span>).contains(user1, user2);
        <span class="predefined-type">List</span>&lt;Tweet&gt; tweetsUser1 = users.get(<span class="integer">0</span>).getTweets();
        assertThat(tweetsUser1).isNotNull().hasSize(<span class="integer">1</span>).contains(tweetUser1);
    }</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td><a href="https://deltaspike.apache.org/documentation/test-control.html" target="_blank" rel="noopener">CdiTestRunner</a> is provided by <a href="https://deltaspike.apache.org" target="_blank" rel="noopener">Apache Deltaspike</a> but you should be able to use other CDI test runners.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Needed to activate DBUnit interceptor<br> IMPORTANT: Since <code>v1.8.0</code> you can also use <code>com.github.database.rider.cdi.api.DBRider</code> annotation to enable database rider, both activate the DBUnitInterceptor.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> Source code of the above example can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-cdi/src/test/java/com/github/database/rider/cdi/DBUnitCDIIt.java#L74" target="_blank" rel="noopener">found here</a>. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock important"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
            <td class="content"> Since <code>v1.8.0</code> you can also use <code>com.github.database.rider.cdi.api.DBRider</code> annotation to enable database rider, both activate the DBUnitInterceptor. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_seed_database_with_junit_5_extension"><a class="anchor" href="#_seed_database_with_junit_5_extension"></a>2.3. Seed database with <code>JUnit 5 extension</code></h3> 
      <div class="paragraph"> 
       <p>DBUnit is enabled in JUnit 5 tests through an <a href="http://junit.org/junit5/docs/current/user-guide/#extensions" target="_blank" rel="noopener">extension</a> named <strong>DBUnitExtension</strong>.</p> 
      </div> 
      <h4 id="_dependencies_3" class="discrete"><strong>Dependencies</strong></h4> 
      <div class="paragraph"> 
       <p>To use the extension just add the following maven dependency:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
   <span class="tag">&lt;groupId&gt;</span>com.github.database-rider<span class="tag">&lt;/groupId&gt;</span>
   <span class="tag">&lt;artifactId&gt;</span>rider-junit5<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.44.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
   <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/users.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 1
    NAME: "@realpestano"
  - ID: 2
    NAME: "@dbunit"</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following junit5 test is executed <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ExtendWith</span>(DBUnitExtension.class) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@RunWith</span>(JUnitPlatform.class) <i class="conum" data-value="2"></i><b>(2)</b>
<span class="annotation">@DataSet</span>(cleanBefore = <span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DBUnitJUnit5It</span> {

    <span class="directive">private</span> ConnectionHolder connectionHolder = () -&gt; <i class="conum" data-value="3"></i><b>(3)</b>
            EntityManagerProvider.instance(<span class="string"><span class="delimiter">"</span><span class="content">junit5-pu</span><span class="delimiter">"</span></span>).clear().connection();<i class="conum" data-value="4"></i><b>(4)</b>

    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">usersWithTweet.yml</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> shouldListUsers() {
        <span class="predefined-type">List</span>&lt;User&gt; users = EntityManagerProvider.em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
        assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
    }</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Enables DBUnit.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>JUnit 5 runner;</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>As JUnit5 requires <strong>Java8</strong> you can use lambdas in your tests;</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>DBUnitExtension will get connection by reflection so just declare a field or a method with <code>ConnectionHolder</code> as return type.<br> TIP: The same works for SpringBoot projects using JUnit5, see an example <a href="https://github.com/database-rider/database-rider/tree/master/rider-examples/spring-boot-dbunit-sample" target="_blank" rel="noopener">project here</a>. 
               <div class="admonitionblock note"> 
                <table> 
                 <tbody> 
                  <tr> 
                   <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
                   <td class="content"> If you use SpringBoot extension for JUnit5 you don’t need to declare the field or method, see an <a href="https://github.com/database-rider/database-rider/blob/master/rider-examples/spring-boot-dbunit-sample/src/test/java/com/github/database/rider/springboot/SpringBootDBUnitTest.java#L19" target="_blank" rel="noopener">example here</a>. </td> 
                  </tr> 
                 </tbody> 
                </table> 
               </div></td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> Source code of the above example can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-junit5/src/test/java/com/github/database/rider/junit5/DBUnitJUnit5It.java/#L24" target="_blank" rel="noopener">found here</a>. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>Another way to activate DBUnit in JUnits 5 test is using <strong>@DBRider</strong> annotation (at method or class level):</p> 
             </div> 
             <div class="listingblock"> 
              <div class="content"> 
               <pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@DBRider</span> <span class="comment">//shortcut for @ExtendWith(DBUnitExtension.class) and @Test</span>
    <span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">usersWithTweet.yml</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> shouldListUsers() {
        <span class="predefined-type">List</span> users = EntityManagerProvider.em().
                createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
        assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
        assertThat(users.get(<span class="integer">0</span>)).isEqualTo(<span class="keyword">new</span> User(<span class="integer">1</span>));
    }</code></pre> 
              </div> 
             </div> 
             <div class="colist arabic"> 
              <table> 
               <tbody> 
                <tr> 
                 <td><i class="conum" data-value="1"></i><b>1</b></td> 
                 <td>Shortcut for <code>@Test</code> and <code>@ExtendWith(DBUnitExtension.class)</code></td> 
                </tr> 
               </tbody> 
              </table> 
             </div> </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> The same works for SpringBoot projects using JUnit5, see an example <a href="https://github.com/database-rider/database-rider/tree/master/rider-examples/spring-boot-dbunit-sample" target="_blank" rel="noopener">project here</a>. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_seeding_database_in_bdd_tests_with_rider_cucumber"><a class="anchor" href="#_seeding_database_in_bdd_tests_with_rider_cucumber"></a>2.4. Seeding database in BDD tests with <code>Rider Cucumber</code></h3> 
      <div class="paragraph"> 
       <p>DBUnit enters the BDD world through a dedicated JUNit runner which is based on <a href="https://cucumber.io/" target="_blank" rel="noopener">Cucumber</a> and <a href="https://deltaspike.apache.org/" target="_blank" rel="noopener">Apache DeltaSpike</a>.</p> 
      </div> 
      <div class="paragraph"> 
       <p>This runner just starts CDI within your BDD tests so you just have to use <a href="#_seed_database_with_code_dbunit_interceptor_code">Database Rider CDI interceptor</a> on Cucumber steps, here is the so called Cucumber CDI runner declaration:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.github.database.rider.examples.cucumber</span>;

<span class="keyword">import</span> <span class="include">com.github.database.rider.cucumber.CdiCucumberTestRunner</span>;
<span class="keyword">import</span> <span class="include">cucumber.api.CucumberOptions</span>;
<span class="keyword">import</span> <span class="include">org.junit.runner.RunWith</span>;


<span class="annotation">@RunWith</span>(CdiCucumberTestRunner.class)
<span class="annotation">@CucumberOptions</span>(
        features = {<span class="string"><span class="delimiter">"</span><span class="content">src/test/resources/features/contacts.feature</span><span class="delimiter">"</span></span>},
        plugin = {<span class="string"><span class="delimiter">"</span><span class="content">json:target/cucumber.json</span><span class="delimiter">"</span></span>}
        <span class="comment">//glue = "com.github.database.rider.examples.glues"</span>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ContactFeature</span> {
}</code></pre> 
       </div> 
      </div> 
      <div class="admonitionblock important"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
          <td class="content"> As cucumber doesn’t work with JUnit Rules, see <a href="https://github.com/cucumber/cucumber-jvm/issues/393" target="_blank" rel="noopener">this issue</a>, you won’t be able to use Cucumber runner with <em>DBUnit Rule</em>, but you can use DataSetExecutor in <code>@Before</code>, see <a href="https://github.com/database-rider/database-rider/tree/master/rider-examples/jpa-productivity-boosters/src/test/java/com/github/database/rider/examples/cucumber/withoutcdi" target="_blank" rel="noopener">example here</a>. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <h4 id="_dependencies_4" class="discrete"><strong>Dependencies</strong></h4> 
      <div class="paragraph"> 
       <p>Here is a set of maven dependencies needed by Database Rider Cucumber:</p> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> Most of the dependencies, except CDI container implementation, are brought by Database Rider Cucumber module transitively. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
   <span class="tag">&lt;groupId&gt;</span>com.github.database-rider<span class="tag">&lt;/groupId&gt;</span>
   <span class="tag">&lt;artifactId&gt;</span>rider-cucumber<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.44.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
   <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
         Cucumber dependencies 
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;groupId&gt;</span>info.cukes<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;artifactId&gt;</span>cucumber-junit<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;version&gt;</span>1.2.4<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;groupId&gt;</span>info.cukes<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;artifactId&gt;</span>cucumber-java<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;version&gt;</span>1.2.4<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody> 
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>You don’t need to declare because it comes with Database Rider Cucumber module dependency.</td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
         DeltaSpike and CDI dependency 
       </div> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;groupId&gt;</span>org.apache.deltaspike.modules<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;artifactId&gt;</span>deltaspike-test-control-module-api<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;version&gt;</span>${ds.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>

<span class="tag">&lt;dependency&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;groupId&gt;</span>org.apache.deltaspike.core<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;artifactId&gt;</span>deltaspike-core-impl<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;version&gt;</span>${ds.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>

<span class="tag">&lt;dependency&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;groupId&gt;</span>org.apache.deltaspike.modules<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;artifactId&gt;</span>deltaspike-test-control-module-impl<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;version&gt;</span>${ds.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>

<span class="tag">&lt;dependency&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;groupId&gt;</span>org.apache.deltaspike.cdictrl<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;artifactId&gt;</span>deltaspike-cdictrl-owb<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;version&gt;</span>${ds.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>

<span class="tag">&lt;dependency&gt;</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="tag">&lt;groupId&gt;</span>org.apache.openwebbeans<span class="tag">&lt;/groupId&gt;</span>
<span class="tag">&lt;artifactId&gt;</span>openwebbeans-impl<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;version&gt;</span>1.6.2<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody> 
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Also comes with Rider Cucumber.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>You can use CDI implementation of your choice.</td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following feature <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>Feature: Contacts test
  As a user of contacts repository
  I want to crud contacts
  So that I can expose contacts service


  Scenario Outline: search contacts
    Given we have a list of contacts
    When we search contacts by name "&lt;name&gt;"
    Then we should find &lt;result&gt; contacts

    Examples: examples1
      | name     | result |
      | delta    | 1      |
      | sp       | 2      |
      | querydsl | 1      |
      | abcd     | 0      |


  Scenario: delete a contact

    Given we have a list of contacts
    When we delete contact by id 1
    Then we should not find contact 1</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>CONTACT:
  - ID: 1
    NAME: "deltaspike"
    EMAIL: "users@deltaspike.apache.org"
    COMPANY_ID: 1
  - ID: 2
    NAME: "querydsl"
    EMAIL: "info@mysema.com"
    COMPANY_ID: 2
  - ID: 3
    NAME: "Spring"
    EMAIL: "spring@pivotal.io"
    COMPANY_ID: 3

COMPANY:
  - ID: 1
    NAME: "Apache"
  - ID: 2
    NAME: "Mysema"
  - ID: 3
    NAME: "Pivotal"
  - ID: 4
    NAME: "Google"</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following Cucumber test <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.github.database.rider.examples.cucumber</span>;

<span class="keyword">import</span> <span class="include">com.github.database.rider.cucumber.CdiCucumberTestRunner</span>;
<span class="keyword">import</span> <span class="include">cucumber.api.CucumberOptions</span>;
<span class="keyword">import</span> <span class="include">org.junit.runner.RunWith</span>;


<span class="annotation">@RunWith</span>(CdiCucumberTestRunner.class)
<span class="annotation">@CucumberOptions</span>(
        features = {<span class="string"><span class="delimiter">"</span><span class="content">src/test/resources/features/contacts.feature</span><span class="delimiter">"</span></span>},
        plugin = {<span class="string"><span class="delimiter">"</span><span class="content">json:target/cucumber.json</span><span class="delimiter">"</span></span>}
        <span class="comment">//glue = "com.github.database.rider.examples.glues"</span>
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ContactFeature</span> {
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following cucumber steps are executed <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.github.database.rider.examples.cucumber</span>;

<span class="keyword">import</span> <span class="include">com.github.database.rider.core.api.dataset.DataSet</span>;
<span class="keyword">import</span> <span class="include">com.github.database.rider.cdi.api.DBUnitInterceptor</span>;
<span class="keyword">import</span> <span class="include">cucumber.api.java.en.Given</span>;
<span class="keyword">import</span> <span class="include">cucumber.api.java.en.Then</span>;
<span class="keyword">import</span> <span class="include">cucumber.api.java.en.When</span>;
<span class="keyword">import</span> <span class="include">org.example.jpadomain.Contact</span>;
<span class="keyword">import</span> <span class="include">org.example.jpadomain.Contact_</span>;
<span class="keyword">import</span> <span class="include">org.example.service.deltaspike.ContactRepository</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.Assert.assertEquals</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.junit.Assert.assertNull</span>;

<span class="annotation">@DBUnitInterceptor</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ContactSteps</span> {

    <span class="annotation">@Inject</span>
    ContactRepository contactRepository; <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="predefined-type">Long</span> count;


    <span class="annotation">@Given</span>(<span class="string"><span class="delimiter">"</span><span class="content">^we have a list of contacts$</span><span class="delimiter">"</span></span>)
    <span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">datasets/contacts.yml</span><span class="delimiter">"</span></span>) <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="directive">public</span> <span class="type">void</span> given() {
        assertEquals(contactRepository.count(), <span class="keyword">new</span> <span class="predefined-type">Long</span>(<span class="integer">3</span>));
    }

    <span class="annotation">@When</span>(<span class="string"><span class="delimiter">"</span><span class="content">^we delete contact by id (</span><span class="char">\\</span><span class="content">d+)$</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> we_delete_contact_by_id(<span class="type">long</span> id) <span class="directive">throws</span> <span class="predefined-type">Throwable</span> {
        contactRepository.remove(contactRepository.findBy(id));
    }

    <span class="annotation">@Then</span>(<span class="string"><span class="delimiter">"</span><span class="content">^we should not find contact (</span><span class="char">\\</span><span class="content">d+)$</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> we_should_not_find_contacts_in_database(<span class="type">long</span> id) <span class="directive">throws</span> <span class="predefined-type">Throwable</span> {
        assertNull(contactRepository.findBy(id));
    }

    <span class="annotation">@When</span>(<span class="string"><span class="delimiter">"</span><span class="content">^^we search contacts by name </span><span class="char">\"</span><span class="content">([^</span><span class="char">\"</span><span class="content">]*)</span><span class="char">\"</span><span class="content">$</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> we_search_contacts_by_name_(<span class="predefined-type">String</span> name) <span class="directive">throws</span> <span class="predefined-type">Throwable</span> {
        Contact contact = <span class="keyword">new</span> Contact();
        contact.setName(name);
        count = contactRepository.countLike(contact, Contact_.name);
    }

    <span class="annotation">@Then</span>(<span class="string"><span class="delimiter">"</span><span class="content">^we should find (</span><span class="char">\\</span><span class="content">d+) contacts$</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> we_should_find_result_contacts(<span class="predefined-type">Long</span> result) <span class="directive">throws</span> <span class="predefined-type">Throwable</span> {
        assertEquals(result, count);
    }
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Activates DBUnit CDI interceptor</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>As the Cucumber cdi runner enables CDI, you can use injection into your Cucumber steps.</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Dataset is prepared before step execution by <code>@DBUnitInterceptor</code>.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> Source code for the example above can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-examples/jpa-productivity-boosters/src/test/java/com/github/database/rider/examples/cucumber/ContactSteps.java#L17" target="_blank" rel="noopener">found here</a>. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before step execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="DataSet-creation"><a class="anchor" href="#DataSet-creation"></a>3. <strong>DataSet creation</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('DataSet-creation');document.getElementById('hidden-DataSet-creation').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-DataSet-creation" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('DataSet-creation');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to create datasets to feed tables<br> As a developer<br> I want to declare database state in external files.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="admonitionblock note"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
           <td class="content"> It is a good practice to move database preparation or any infrastructure code outside test logic, it increases test maintainability. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_creating_a_yaml_dataset"><a class="anchor" href="#_creating_a_yaml_dataset"></a>3.1. Creating a <code>YAML</code> dataset</h3> 
      <div class="paragraph"> 
       <p><strong>YAML</strong> stands for <code>yet another markup language</code> and is a very simple, lightweight yet powerful format.</p> 
      </div> 
      <div class="admonitionblock important"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
          <td class="content"> YAML is based on spaces indentation so be careful because any missing or additional space can lead to an incorrect dataset. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> Source code of the examples below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/format/DataSetFormatIt.java/" target="_blank" rel="noopener">found here</a>. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/yml/users.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 1
    NAME: "@realpestano"
  - ID: 2
    NAME: "@dbunit"
TWEET:
  - ID: abcdef12345
    CONTENT: "dbunit rules!"
    DATE: "[DAY,NOW]"
    USER_ID: 1
FOLLOWER:
  - ID: 1
    USER_ID: 1
    FOLLOWER_ID: 2</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">yml/users.yml</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldSeedDatabaseWithYAMLDataSet() {
   <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
   assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_creating_a_json_dataset"><a class="anchor" href="#_creating_a_json_dataset"></a>3.2. Creating a <code>JSON</code> dataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/json/users.json 
           </div> 
           <div class="content"> 
            <pre>{
  "USER": [
    {
      "id": 1,
      "name": "@realpestano"
    },
    {
      "id": 2,
      "name": "@dbunit"
    }
  ],
  "TWEET": [
    {
      "id": "abcdef12345",
      "content": "dbunit rules json example",
      "date": "2013-01-20",
      "user_id": 1
    }
  ],
  "FOLLOWER": [
    {
      "id": 1,
      "user_id": 1,
      "follower_id": 2
    }
  ]
}</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">json/users.json</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldSeedDatabaseWithJSONDataSet() {
   <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
   assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_creating_a_xml_dataset"><a class="anchor" href="#_creating_a_xml_dataset"></a>3.3. Creating a <code>XML</code> dataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/xml/users.xml 
           </div> 
           <div class="content"> 
            <pre>&lt;dataset&gt;
    &lt;USER id="1" name="@realpestano" /&gt;
    &lt;USER id="2" name="@dbunit" /&gt;
    &lt;TWEET id="abcdef12345" content="dbunit rules flat xml example" user_id="1"/&gt;
    &lt;FOLLOWER id="1" user_id="1" follower_id="2"/&gt;
&lt;/dataset&gt;</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">xml/users.xml</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldSeedDatabaseWithXMLDataSet() {
   <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
   assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_creating_a_xls_dataset"><a class="anchor" href="#_creating_a_xls_dataset"></a>3.4. Creating a <code>XLS</code> dataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/xls/users.xls 
           </div> 
           <div class="content"> 
            <pre>ID	NAME
1	@realpestano
2	@dbunit</pre> 
           </div> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> Each Excell <code>sheet</code> name is the <strong>table name</strong>, first row is <strong>columns names</strong> and remaining rows/cells are values. </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">xls/users.xls</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldSeedDatabaseWithXLSDataSet() {
    <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
    assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_creating_a_csv_dataset"><a class="anchor" href="#_creating_a_csv_dataset"></a>3.5. Creating a <code>CSV</code> dataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/csv/USER.csv 
           </div> 
           <div class="content"> 
            <pre>ID, NAME
"1","@realpestano"
"2","@dbunit"</pre> 
           </div> 
          </div> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/csv/TWEET.csv 
           </div> 
           <div class="content"> 
            <pre>ID, CONTENT, DATE, LIKES, USER_ID
"abcdef12345","dbunit rules!","2016-09-12 22:46:20.0",null,"1"</pre> 
           </div> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> File name is <strong>table name</strong> and first row is <strong>column names</strong>. </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="listingblock"> 
           <div class="title">
             src/test/resources/dataset/csv/table-ordering.txt 
           </div> 
           <div class="content"> 
            <pre>USER
TWEET
FOLLOWER</pre> 
           </div> 
          </div> 
          <div class="admonitionblock important"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
              <td class="content"> CSV datasets are composed by multiple files (one per table) and a table ordering descriptor declaring the order of creation. </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>Also note that each csv dataset must be declared in its own folder because DBUnit will read all csv files present in dataset folder.</p> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">datasets/csv/USER.csv</span><span class="delimiter">"</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">void</span> shouldSeedDatabaseWithCSVDataSet() {
    <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
    assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>You need to declare just one csv dataset file. Database rider will take parent folder as dataset folder.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The database should be seeded with the dataset content before test execution <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="Configuration"><a class="anchor" href="#Configuration"></a>4. <strong>Configuration</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('Configuration');document.getElementById('hidden-Configuration').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-Configuration" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('Configuration');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to handle various use cases<br> As a developer<br> I want to be able to configure DataBase Rider</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_dataset_configuration"><a class="anchor" href="#_dataset_configuration"></a>4.1. DataSet configuration</h3> 
      <div class="paragraph"> 
       <p>DataSet configuration is done via <strong>@DataSet</strong> annotation at <strong>class</strong> or <strong>method</strong> level:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(value =<span class="string"><span class="delimiter">"</span><span class="content">users.yml</span><span class="delimiter">"</span></span>, strategy = SeedStrategy.UPDATE,
  disableConstraints = <span class="predefined-constant">true</span>,cleanAfter = <span class="predefined-constant">true</span>,
  useSequenceFiltering = <span class="predefined-constant">true</span>, tableOrdering = {<span class="string"><span class="delimiter">"</span><span class="content">TWEET</span><span class="delimiter">"</span></span>,<span class="string"><span class="delimiter">"</span><span class="content">USER</span><span class="delimiter">"</span></span>},
  executeScriptsBefore = <span class="string"><span class="delimiter">"</span><span class="content">script.sql</span><span class="delimiter">"</span></span>, executeStatementsBefore = <span class="string"><span class="delimiter">"</span><span class="content">DELETE from USER where 1=1</span><span class="delimiter">"</span></span>
  transactional = <span class="predefined-constant">true</span>, cleanAfter=<span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">void</span> shouldCreateDataSet(){

}</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>Table below illustrate the possible configurations:</p> 
      </div> 
      <table class="tableblock frame-all grid-all stretch"> 
       <colgroup> 
        <col style="width: 33.3333%;"> 
        <col style="width: 33.3333%;"> 
        <col style="width: 33.3334%;"> 
       </colgroup> 
       <thead> 
        <tr> 
         <th class="tableblock halign-left valign-top">Name</th> 
         <th class="tableblock halign-left valign-top">Description</th> 
         <th class="tableblock halign-left valign-top">Default</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">value</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Dataset file name using test resources folder as root directory. Multiple, comma separated, dataset file names can be provided.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">""</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">executorId</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Name of dataset executor for the given dataset.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">DataSetExecutorImpl.DEFAULT_EXECUTOR_ID</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">strategy</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">DataSet seed strategy. Possible values are: CLEAN_INSERT, INSERT, REFRESH and UPDATE.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">CLEAN_INSERT, meaning that DBUnit will clean and then insert data in tables present in provided dataset.</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">useSequenceFiltering</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">If true dbunit will look at constraints and dataset to try to determine the correct ordering for the SQL statements.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">tableOrdering</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A list of table names used to reorder DELETE operations to prevent failures due to circular dependencies.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">""</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">disableConstraints</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Disable database constraints.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">cleanBefore</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">If true Database Rider will try to delete database before test in a smart way by using table ordering and brute force.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">cleanAfter</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">If true Database Rider will try to delete database after test in a smart way by using table ordering and brute force.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">transactional</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">If true a transaction will be started before and committed after test execution.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">executeStatementsBefore</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A list of jdbc statements to execute before test.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">{}</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">executeStatementsAfter</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A list of jdbc statements to execute after test.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">{}</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">executeScriptsBefore</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A list of sql script files to execute before test. Note that commands inside sql file must be separated by <code>;</code>.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">{}</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">executeScriptsAfter</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A list of sql script files to execute after test. Note that commands inside sql file must be separated by <code>;</code>.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">{}</p></td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="sect2"> 
      <h3 id="_dbunit_configuration"><a class="anchor" href="#_dbunit_configuration"></a>4.2. DBUnit configuration</h3> 
      <div class="paragraph"> 
       <p><code>DBUnit</code>, the tool doing the dirty work the scenes, can be configured by <strong>@DBUnit</strong> annotation (class or method level) and <strong>dbunit.yml</strong> file present in <code>test resources</code> folder.</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DBUnit</span>(cacheConnection = <span class="predefined-constant">true</span>, cacheTableNames = <span class="predefined-constant">false</span>, allowEmptyFields = <span class="predefined-constant">true</span>,batchSize = <span class="integer">50</span>)
<span class="directive">public</span> <span class="type">void</span> shouldLoadDBUnitConfigViaAnnotation() {

}</code></pre> 
       </div> 
      </div> 
      <div class="paragraph"> 
       <p>Here is a dbunit.yml example, also the default values:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="title">
         src/test/resources/dbunit.yml 
       </div> 
       <div class="content"> 
        <pre>cacheConnection: true <i class="conum" data-value="1"></i><b>(1)</b>
cacheTableNames: true <i class="conum" data-value="2"></i><b>(2)</b>
leakHunter: false <i class="conum" data-value="3"></i><b>(3)</b>
caseInsensitiveStrategy: !!com.github.database.rider.core.api.configuration.Orthography 'UPPERCASE' <i class="conum" data-value="4"></i><b>(4)</b>
properties:
  batchedStatements:  false <i class="conum" data-value="5"></i><b>(5)</b>
  qualifiedTableNames: false <i class="conum" data-value="6"></i><b>(6)</b>
  caseSensitiveTableNames: false <i class="conum" data-value="7"></i><b>(7)</b>
  batchSize: 100 <i class="conum" data-value="8"></i><b>(8)</b>
  fetchSize: 100 <i class="conum" data-value="9"></i><b>(9)</b>
  allowEmptyFields: false <i class="conum" data-value="10"></i><b>(10)</b>
  escapePattern: <i class="conum" data-value="11"></i><b>(11)</b>
connectionConfig: <i class="conum" data-value="12"></i><b>(12)</b>
  driver: ""
  url: ""
  user: ""
  password: ""</pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody> 
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Database connection will be reused among tests</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="2"></i><b>2</b></td> 
          <td>Caches table names to avoid query connection metadata unnecessarily</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="3"></i><b>3</b></td> 
          <td>Activate connection leak detection. In case a leak (open JDBC connections is increased after test execution) is found an exception is thrown and test fails.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="4"></i><b>4</b></td> 
          <td>When <code>caseSensitiveTableNames</code> is <code>false</code> will apply letter case based on configured strategy. Valid values are <code>UPPERCASE</code> and <code>LOWERCASE</code>.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="5"></i><b>5</b></td> 
          <td>Enables usage of JDBC batched statement</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="6"></i><b>6</b></td> 
          <td>Enable or disable multiple schemas support. If enabled, Dbunit access tables with names fully qualified by schema using this format: SCHEMA.TABLE.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="7"></i><b>7</b></td> 
          <td>Enable or disable case sensitive table names. If enabled, Dbunit handles all table names in a case sensitive way.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="8"></i><b>8</b></td> 
          <td>Specifies the size of JDBC batch updates</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="9"></i><b>9</b></td> 
          <td>Specifies statement fetch size for loading data into a result set table.</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="10"></i><b>10</b></td> 
          <td>Allow to call INSERT/UPDATE with empty strings ('').</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="11"></i><b>11</b></td> 
          <td>Allows schema, table and column names escaping. The property value is an escape pattern where the ? is replaced by the name. For example, the pattern "[?]" is expanded as "[MY_TABLE]" for a table named "MY_TABLE". The most common escape pattern is ""?"" which surrounds the table name with quotes (for the above example it would result in ""MY_TABLE""). As a fallback if no questionmark is in the given String and its length is one it is used to surround the table name on the left and right side. For example the escape pattern """ will have the same effect as the escape pattern ""?"".</td> 
         </tr> 
         <tr> 
          <td><i class="conum" data-value="12"></i><b>12</b></td> 
          <td>JDBC connection configuration, it will be used in case you don’t provide a connection inside test (except in CDI test where connection is inferred from entity manager).</td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> <code>@DBUnit</code> annotation takes precedence over <code>dbunit.yml</code> global configuration which will be used only if the annotation is not present. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="admonitionblock tip"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
          <td class="content"> 
           <div class="paragraph"> 
            <p>Since version 1.1.0 you can define only the properties of your interest, example:</p> 
           </div> 
           <div class="listingblock"> 
            <div class="content"> 
             <pre>cacheConnection: false
properties:
  caseSensitiveTableNames: true
  escapePattern: ""?""</pre> 
            </div> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="DataSet-assertion"><a class="anchor" href="#DataSet-assertion"></a>5. <strong>DataSet assertion</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('DataSet-assertion');document.getElementById('hidden-DataSet-assertion').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-DataSet-assertion" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('DataSet-assertion');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to verify database state after test execution<br> As a developer<br> I want to assert database state with datasets.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Complete source code of examples below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/ExpectedDataSetIt.java#L23" target="_blank" rel="noopener">found here</a>. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_assertion_with_yml_dataset"><a class="anchor" href="#_assertion_with_yml_dataset"></a>5.1. Assertion with yml dataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             expectedUsers.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 1
    NAME: "expected user1"
  - ID: 2
    NAME: "expected user2"</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(JUnit4.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ExpectedDataSetIt</span> {
    <span class="annotation">@Rule</span>
    <span class="directive">public</span> ExpectedException exceptionRule = ExpectedException.none();

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> EntityManagerProvider emProvider = EntityManagerProvider.instance(<span class="string"><span class="delimiter">"</span><span class="content">rules-it</span><span class="delimiter">"</span></span>);

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> DBUnitRule dbUnitRule = DBUnitRule.instance(emProvider.connection());


    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(cleanBefore = <span class="predefined-constant">true</span>)<i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@ExpectedDataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/expectedUsers.yml</span><span class="delimiter">"</span></span>, ignoreCols = <span class="string"><span class="delimiter">"</span><span class="content">id</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> shouldMatchExpectedDataSet() {
        EntityManagerProvider instance = EntityManagerProvider.newInstance(<span class="string"><span class="delimiter">"</span><span class="content">rules-it</span><span class="delimiter">"</span></span>);
        User u = <span class="keyword">new</span> User();
        u.setName(<span class="string"><span class="delimiter">"</span><span class="content">expected user1</span><span class="delimiter">"</span></span>);
        User u2 = <span class="keyword">new</span> User();
        u2.setName(<span class="string"><span class="delimiter">"</span><span class="content">expected user2</span><span class="delimiter">"</span></span>);
        instance.tx().begin();
        instance.em().persist(u);
        instance.em().persist(u2);
        instance.tx().commit();
    }</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Clear database before to avoid conflict with other tests.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test must pass because database state is as in expected dataset. <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_assertion_with_regular_expression_in_expected_dataset"><a class="anchor" href="#_assertion_with_regular_expression_in_expected_dataset"></a>5.2. Assertion with regular expression in expected dataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             expectedUsersRegex.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: "regex:\\d+"
    NAME: regex:^expected user.* #expected user1
  - ID: "regex:\\d+"
    NAME: regex:.*user2$ #expected user2</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(cleanBefore = <span class="predefined-constant">true</span>)
<span class="annotation">@ExpectedDataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/expectedUsersRegex.yml</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldMatchExpectedDataSetUsingRegex() {
    User u = <span class="keyword">new</span> User();
    u.setName(<span class="string"><span class="delimiter">"</span><span class="content">expected user1</span><span class="delimiter">"</span></span>);
    User u2 = <span class="keyword">new</span> User();
    u2.setName(<span class="string"><span class="delimiter">"</span><span class="content">expected user2</span><span class="delimiter">"</span></span>);
    EntityManagerProvider.tx().begin();
    EntityManagerProvider.em().persist(u);
    EntityManagerProvider.em().persist(u2);
    EntityManagerProvider.tx().commit();
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test must pass because database state is as in expected dataset. <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_database_assertion_with_seeding_before_test_execution"><a class="anchor" href="#_database_assertion_with_seeding_before_test_execution"></a>5.3. Database assertion with seeding before test execution</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             user.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 1
    NAME: "@realpestano"
  - ID: 2
    NAME: "@dbunit"</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             expectedUser.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 2
    NAME: "@dbunit"</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/user.yml</span><span class="delimiter">"</span></span>, disableConstraints = <span class="predefined-constant">true</span>)
<span class="annotation">@ExpectedDataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/expectedUser.yml</span><span class="delimiter">"</span></span>, ignoreCols = <span class="string"><span class="delimiter">"</span><span class="content">id</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldMatchExpectedDataSetAfterSeedingDataBase() {
    tx().begin();
    em().remove(EntityManagerProvider.em().find(User.class, <span class="integer">1L</span>));
    tx().commit();
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test must pass because database state is as in expected dataset. <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_failing_assertion"><a class="anchor" href="#_failing_assertion"></a>5.4. Failing assertion</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             expectedUsers.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: 1
    NAME: "expected user1"
  - ID: 2
    NAME: "expected user2"</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(cleanBefore = <span class="predefined-constant">true</span>)
<span class="annotation">@ExpectedDataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/expectedUsers.yml</span><span class="delimiter">"</span></span>, ignoreCols = <span class="string"><span class="delimiter">"</span><span class="content">id</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldNotMatchExpectedDataSet() {
    exceptionRule.expect(ComparisonFailure.class);
    exceptionRule.expectMessage(<span class="string"><span class="delimiter">"</span><span class="content">value (table=USER, row=0, col=NAME) expected:&lt;[]expected user1&gt; but was:&lt;[non ]expected user1&gt;</span><span class="delimiter">"</span></span>);
    User u = <span class="keyword">new</span> User();
    u.setName(<span class="string"><span class="delimiter">"</span><span class="content">non expected user1</span><span class="delimiter">"</span></span>);
    User u2 = <span class="keyword">new</span> User();
    u2.setName(<span class="string"><span class="delimiter">"</span><span class="content">non expected user2</span><span class="delimiter">"</span></span>);
    EntityManagerProvider.tx().begin();
    EntityManagerProvider.em().persist(u);
    EntityManagerProvider.em().persist(u2);
    EntityManagerProvider.tx().commit();
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test must fail with following error: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="admonitionblock important"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
              <td class="content"> junit.framework.ComparisonFailure: value (table=USER, row=0, col=name) expected:&lt;[]expected user1&gt; but was:&lt;[non ]expected user1&gt; at org.dbunit.assertion.JUnitFailureFactory.createFailure(JUnitFailureFactory.java:39) at org.dbunit.assertion.DefaultFailureHandler.createFailure(DefaultFailureHandler.java:97) at org.dbunit.assertion.DefaultFailureHandler.handle(DefaultFailureHandler.java:223) at …​ </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_assertion_using_automatic_transaction"><a class="anchor" href="#_assertion_using_automatic_transaction"></a>5.5. Assertion using automatic transaction</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             expectedUsersRegex.yml 
           </div> 
           <div class="content"> 
            <pre>USER:
  - ID: "regex:\\d+"
    NAME: regex:^expected user.* #expected user1
  - ID: "regex:\\d+"
    NAME: regex:.*user2$ #expected user2</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(cleanBefore = <span class="predefined-constant">true</span>, transactional = <span class="predefined-constant">true</span>, executorId = <span class="string"><span class="delimiter">"</span><span class="content">TransactionIt</span><span class="delimiter">"</span></span>)
<span class="annotation">@ExpectedDataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/expectedUsersRegex.yml</span><span class="delimiter">"</span></span>)
<span class="annotation">@DBUnit</span>(cacheConnection = <span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">void</span> shouldManageTransactionAutomatically() {
    User u = <span class="keyword">new</span> User();
    u.setName(<span class="string"><span class="delimiter">"</span><span class="content">expected user1</span><span class="delimiter">"</span></span>);
    User u2 = <span class="keyword">new</span> User();
    u2.setName(<span class="string"><span class="delimiter">"</span><span class="content">expected user2</span><span class="delimiter">"</span></span>);
    EntityManagerProvider.em().persist(u);
    EntityManagerProvider.em().persist(u2);
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> <code>Transactional</code> attribute will make Database Rider start a transaction before test and commit the transaction <strong>after</strong> test execution but <strong>before</strong> expected dataset comparison. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test must pass because inserted users are committed to database and database state matches expected dataset. <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="Dynamic-data-using-scritable-datasets"><a class="anchor" href="#Dynamic-data-using-scritable-datasets"></a>6. <strong>Dynamic data using scritable datasets</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('Dynamic-data-using-scritable-datasets');document.getElementById('hidden-Dynamic-data-using-scritable-datasets').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-Dynamic-data-using-scritable-datasets" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('Dynamic-data-using-scritable-datasets');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to have dynamic data in datasets<br> As a developer<br> I want to use scripts in DBUnit datasets.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="paragraph"> 
        <p>Scritable datasets are backed by JSR 223.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.</p> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Complete source code of examples below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/ScriptReplacementsIt.java#L18" target="_blank" rel="noopener">found here</a>. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_seed_database_with_groovy_script_in_dataset"><a class="anchor" href="#_seed_database_with_groovy_script_in_dataset"></a>6.1. Seed database with groovy script in dataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>Groovy script engine is on test classpath <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.codehaus.groovy<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>groovy-all<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.4.6<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>TWEET:
  - ID: "1"
    CONTENT: "dbunit rules!"
    DATE: "groovy:new Date()" <i class="conum" data-value="1"></i><b>(1)</b>
    USER_ID: 1</pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Groovy scripting is enabled by <code>groovy:</code> string.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">datasets/yml/groovy-with-date-replacements.yml</span><span class="delimiter">"</span></span>, cleanBefore = <span class="predefined-constant">true</span>, disableConstraints = <span class="predefined-constant">true</span>, executorId = <span class="string"><span class="delimiter">"</span><span class="content">rider-it</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldReplaceDateUsingGroovyInDataset() {
    Tweet tweet = (Tweet) emProvider.em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select t from Tweet t where t.id = '1'</span><span class="delimiter">"</span></span>).getSingleResult();
    assertThat(tweet).isNotNull();
    assertThat(tweet.getDate().get(<span class="predefined-type">Calendar</span>.DAY_OF_MONTH)).
            isEqualTo(now.get(<span class="predefined-type">Calendar</span>.DAY_OF_MONTH));
    assertThat(tweet.getDate().get(<span class="predefined-type">Calendar</span>.HOUR_OF_DAY)).
            isEqualTo(now.get(<span class="predefined-type">Calendar</span>.HOUR_OF_DAY));
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Dataset script should be interpreted while seeding the database <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_seed_database_with_javascript_in_dataset"><a class="anchor" href="#_seed_database_with_javascript_in_dataset"></a>6.2. Seed database with javascript in dataset</h3> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> Javascript engine comes within JDK so no additional classpath dependency is necessary. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>TWEET:
  - ID: "1"
    CONTENT: "dbunit rules!"
    LIKES: "js:(5+5)*10/2" <i class="conum" data-value="1"></i><b>(1)</b>
    USER_ID: 1</pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Javascript scripting is enabled by <code>js:</code> string.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">datasets/yml/js-with-calc-replacements.yml</span><span class="delimiter">"</span></span>, cleanBefore = <span class="predefined-constant">true</span>, disableConstraints = <span class="predefined-constant">true</span>, executorId = <span class="string"><span class="delimiter">"</span><span class="content">rider-it</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldReplaceLikesUsingJavaScriptInDataset() {
    Tweet tweet = (Tweet) emProvider.em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select t from Tweet t where t.id = '1'</span><span class="delimiter">"</span></span>).getSingleResult();
    assertThat(tweet).isNotNull();
    assertThat(tweet.getLikes()).isEqualTo(<span class="integer">50</span>);
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Dataset script should be interpreted while seeding the database <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="Database-connection-leak-detection"><a class="anchor" href="#Database-connection-leak-detection"></a>7. <strong>Database connection leak detection</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('Database-connection-leak-detection');document.getElementById('hidden-Database-connection-leak-detection').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-Database-connection-leak-detection" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('Database-connection-leak-detection');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to find JDBC connection leaks<br> As a developer<br> I want to make Database Rider monitor connections during tests execution.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="paragraph"> 
        <p>Leak hunter is a Database Rider component, based on <a href="https://vladmihalcea.com/2016/07/12/the-best-way-to-detect-database-connection-leaks/" target="_blank" rel="noopener">this blog post</a>, which counts open jdbc connections before and after test execution.</p> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Complete source code of example below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/LeakHunterIt.java#L19" target="_blank" rel="noopener">found here</a>. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_detecting_connection_leak"><a class="anchor" href="#_detecting_connection_leak"></a>7.1. Detecting connection leak</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(JUnit4.class)
<span class="annotation">@DBUnit</span>(leakHunter = <span class="predefined-constant">true</span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@Ignore</span>(<span class="string"><span class="delimiter">"</span><span class="content">`shouldFindTwoConnectionLeaks` is failing randomly, seems one of the connections in being closed by another test or DriverManager is returning the same connection.</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">LeakHunterIt</span> {

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> DBUnitRule dbUnitRule = DBUnitRule.instance(<span class="keyword">new</span> ConnectionHolderImpl(getConnection()));

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> ExpectedException exception = ExpectedException.none();


    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">yml/user.yml</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> <span class="type">void</span> shouldFindTwoConnectionLeaks() <span class="directive">throws</span> <span class="exception">SQLException</span> {
        exception.expect(LeakHunterException.class);
        exception.expectMessage(<span class="string"><span class="delimiter">"</span><span class="content">Execution of method shouldFindTwoConnectionLeaks left 2 open connection(s).</span><span class="delimiter">"</span></span>);
        createLeak();
        createLeak();
    }

    <span class="directive">private</span> <span class="type">void</span> createLeak() <span class="directive">throws</span> <span class="exception">SQLException</span> {
        <span class="predefined-type">Connection</span> connection = getConnection();
        <span class="keyword">try</span> (<span class="predefined-type">Statement</span> stmt = connection.createStatement()) {
            <span class="predefined-type">ResultSet</span> resultSet = stmt.executeQuery(<span class="string"><span class="delimiter">"</span><span class="content">select count(*) from user</span><span class="delimiter">"</span></span>);
            assertThat(resultSet.next()).isTrue();
            assertThat(resultSet.getInt(<span class="integer">1</span>)).isEqualTo(<span class="integer">2</span>);
        }
    }</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody> 
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Enables connection leak detection.</td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> If number of connections after test execution are greater than before then a <strong>LeakHunterException</strong> will be raised. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="DataSet-export"><a class="anchor" href="#DataSet-export"></a>8. <strong>DataSet export</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('DataSet-export');document.getElementById('hidden-DataSet-export').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-DataSet-export" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('DataSet-export');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to easily create <code>dataset files</code><br> As a developer<br> I want generate datasets based on database state.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="paragraph"> 
        <p>Manual creation of datasets is a very error prone task. In order to export database state after test execution into datasets files one can use @ExportDataSet Annotation or use DataSetExporter component or even using a <a href="https://forge.jboss.org/" target="_blank" rel="noopener">JBoss Forge</a> addon.</p> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Complete source code of examples below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/exporter/ExportDataSetIt.java#L31" target="_blank" rel="noopener">found here</a>. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_export_dataset_with_exportdataset_annotation"><a class="anchor" href="#_export_dataset_with_exportdataset_annotation"></a>8.1. Export dataset with <code>@ExportDataSet</code> annotation</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">datasets/yml/users.yml</span><span class="delimiter">"</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@ExportDataSet</span>(format = DataSetFormat.XML, outputName = <span class="string"><span class="delimiter">"</span><span class="content">target/exported/xml/allTables.xml</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">void</span> shouldExportAllTablesInXMLFormat() {
}</code></pre> 
       </div> 
      </div> 
      <div class="colist arabic"> 
       <table> 
        <tbody> 
         <tr> 
          <td><i class="conum" data-value="1"></i><b>1</b></td> 
          <td>Used here just to seed database, you could insert data manually or connect to a database which already has data.</td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
      <div class="paragraph"> 
       <p>After above test execution all tables will be exported to a xml dataset.</p> 
      </div> 
      <div class="admonitionblock note"> 
       <table> 
        <tbody> 
         <tr> 
          <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
          <td class="content"> <strong>XML, YML, JSON, XLS and CSV</strong> formats are supported. </td> 
         </tr> 
        </tbody> 
       </table> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_programmatic_export"><a class="anchor" href="#_programmatic_export"></a>8.2. Programmatic export</h3> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(cleanBefore = <span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">void</span> shouldExportYMLDataSetProgrammatically() <span class="directive">throws</span> <span class="exception">SQLException</span>, DatabaseUnitException {
    tx().begin();
    User u1 = <span class="keyword">new</span> User();
    u1.setName(<span class="string"><span class="delimiter">"</span><span class="content">u1</span><span class="delimiter">"</span></span>);
    EntityManagerProvider.em().persist(u1);
    tx().commit();
    DataSetExporter.getInstance().export(emProvider.connection(), <span class="keyword">new</span> DataSetExportConfig().outputFileName(<span class="string"><span class="delimiter">"</span><span class="content">target/user.yml</span><span class="delimiter">"</span></span>));
    <span class="predefined-type">File</span> ymlDataSet = <span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">"</span><span class="content">target/user.yml</span><span class="delimiter">"</span></span>);
    assertThat(ymlDataSet).exists();
    assertThat(contentOf(ymlDataSet)).
            contains(<span class="string"><span class="delimiter">"</span><span class="content">USER:</span><span class="delimiter">"</span></span> + NEW_LINE +
                            <span class="string"><span class="delimiter">"</span><span class="content"> - ID: </span><span class="delimiter">"</span></span> + u1.getId() + NEW_LINE +
                            <span class="string"><span class="delimiter">"</span><span class="content"> NAME: </span><span class="char">\"</span><span class="content">u1</span><span class="char">\"</span><span class="delimiter">"</span></span> + NEW_LINE
            );
}

<span class="annotation">@Test</span>
<span class="annotation">@DataSet</span>(cleanBefore = <span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">void</span> shouldExportYMLDataSetWithExplicitSchemaProgrammatically() <span class="directive">throws</span> <span class="exception">SQLException</span>, DatabaseUnitException {
    tx().begin();
    User u1 = <span class="keyword">new</span> User();
    u1.setName(<span class="string"><span class="delimiter">"</span><span class="content">u1</span><span class="delimiter">"</span></span>);
    EntityManagerProvider.em().persist(u1);
    tx().commit();
    DataSetExporter.getInstance().export(emProvider.connection(),
            <span class="keyword">new</span> DataSetExportConfig().outputFileName(<span class="string"><span class="delimiter">"</span><span class="content">target/user.yml</span><span class="delimiter">"</span></span>), <span class="string"><span class="delimiter">"</span><span class="content">public</span><span class="delimiter">"</span></span>);
    <span class="predefined-type">File</span> ymlDataSet = <span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">"</span><span class="content">target/user.yml</span><span class="delimiter">"</span></span>);
    assertThat(ymlDataSet).exists();
    assertThat(contentOf(ymlDataSet)).
            contains(<span class="string"><span class="delimiter">"</span><span class="content">USER:</span><span class="delimiter">"</span></span> + NEW_LINE +
                            <span class="string"><span class="delimiter">"</span><span class="content"> - ID: </span><span class="delimiter">"</span></span> + u1.getId() + NEW_LINE +
                            <span class="string"><span class="delimiter">"</span><span class="content"> NAME: </span><span class="char">\"</span><span class="content">u1</span><span class="char">\"</span><span class="delimiter">"</span></span> + NEW_LINE
            );
}</code></pre> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_configuration"><a class="anchor" href="#_configuration"></a>8.3. Configuration</h3> 
      <div class="paragraph"> 
       <p>Following table shows all exporter configuration options:</p> 
      </div> 
      <table class="tableblock frame-all grid-all stretch"> 
       <colgroup> 
        <col style="width: 33.3333%;"> 
        <col style="width: 33.3333%;"> 
        <col style="width: 33.3334%;"> 
       </colgroup> 
       <thead> 
        <tr> 
         <th class="tableblock halign-left valign-top">Name</th> 
         <th class="tableblock halign-left valign-top">Description</th> 
         <th class="tableblock halign-left valign-top">Default</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">format</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Exported dataset file format.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">YML</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">includeTables</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A list of table names to include in exported dataset.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Default is empty which means <strong>ALL tables</strong>.</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">queryList</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">A list of select statements which the result will used in exported dataset.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">{}</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">dependentTables</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">If true will bring dependent tables of declared includeTables.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td> 
        </tr> 
        <tr> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">outputName</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">Name (and path) of output file.</p></td> 
         <td class="tableblock halign-left valign-top"><p class="tableblock">""</p></td> 
        </tr> 
       </tbody> 
      </table> 
     </div> 
     <div class="sect2"> 
      <h3 id="_export_using_dbunit_addon"><a class="anchor" href="#_export_using_dbunit_addon"></a>8.4. Export using DBUnit Addon</h3> 
      <div class="paragraph"> 
       <p><a href="https://github.com/database-rider/dbunit-addon" target="_blank" rel="noopener">DBUnit Addon</a> exports DBUnit datasets based on a database connection.</p> 
      </div> 
      <div class="paragraph"> 
       <div class="title">
         Pre requisites 
       </div> 
       <p>You need <a href="https://forge.jboss.org/download" target="_blank" rel="noopener">JBoss Forge</a> installed in your IDE or available at command line.</p> 
      </div> 
      <div class="paragraph"> 
       <div class="title">
         Installation 
       </div> 
       <p>Use install addon from git command:</p> 
      </div> 
      <div class="listingblock"> 
       <div class="content"> 
        <pre>addon-install-from-git --url https://github.com/database-rider/dbunit-addon.git</pre> 
       </div> 
      </div> 
      <div class="olist arabic"> 
       <div class="title">
         Usage 
       </div> 
       <ol class="arabic"> 
        <li> <p>Setup database connection</p> 
         <div class="imageblock"> 
          <div class="content"> 
           <img src="https://raw.githubusercontent.com/database-rider/dbunit-addon/master/setup_cmd.png" alt="Setup command"> 
          </div> 
         </div> </li> 
        <li> <p>Export database tables into <strong>YAML</strong>, <strong>JSON</strong>, <strong>XML</strong>, <strong>XLS</strong> and <strong>CSV</strong> datasets.</p> 
         <div class="imageblock"> 
          <div class="content"> 
           <img src="https://raw.githubusercontent.com/database-rider/dbunit-addon/master/export_cmd.png" alt="Export command"> 
          </div> 
         </div> </li> 
       </ol> 
      </div> 
      <div class="ulist"> 
       <div class="title">
         Export configuration 
       </div> 
       <ul> 
        <li> <p><code>Format</code>: Dataset format.</p> </li> 
        <li> <p><code>Include tables</code>: Name of tables to include in generated dataset. If empty all tables will be exported.</p> </li> 
        <li> <p><code>Dependent tables</code>: If true will bring dependent included tables. Works in conjunction with <code>includeTables</code>.</p> </li> 
        <li> <p><code>Query list</code>: A list of SQL statements which resulting rows will be used in generated dataset.</p> </li> 
        <li> <p><code>Output dir</code>: directory to generate dataset.</p> </li> 
        <li> <p><code>Name</code>: name of resulting dataset. Format can be ommited in dataset name.</p> </li> 
       </ul> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="MetaDataSet"><a class="anchor" href="#MetaDataSet"></a>9. <strong>MetaDataSet</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('MetaDataSet');document.getElementById('hidden-MetaDataSet').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-MetaDataSet" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('MetaDataSet');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to reuse datasets<br> As a developer<br> I want to create a custom annotation which holds my dataset and use it among tests.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Complete source code of examples below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/MetaDataSetIt.java#L21" target="_blank" rel="noopener">found here</a>. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> See <a href="https://github.com/database-rider/database-rider/blob/master/rider-spring/src/test/java/com/github/database/rider/spring/dataset/MetaDataSetIt.java" target="_blank" rel="noopener">Rider Spring</a>, <a href="https://github.com/database-rider/database-rider/blob/master/rider-junit5/src/test/java/com/github/database/rider/junit5/MetaDataSetIt.java" target="_blank" rel="noopener">JUnit5</a> and <a href="https://github.com/database-rider/database-rider/blob/master/rider-cdi/src/test/java/com/github/database/rider/cdi/MetaDataSetIt.java" target="_blank" rel="noopener">CDI</a> examples. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_class_level_metadataset"><a class="anchor" href="#_class_level_metadataset"></a>9.1. Class level metadataset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following metataset annotation <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             MetaDataSet.java 
           </div> 
           <div class="content"> 
            <pre>package com.github.database.rider.core.api.dataset;

import java.lang.annotation.ElementType;
import java.lang.annotation.Inherited;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;


@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE, ElementType.METHOD})
@DataSet(value = "yml/users.yml", disableConstraints = true)
public @interface MetaDataSet {

}</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(JUnit4.class)
<span class="annotation">@MetaDataSet</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MetaDataSetIt</span> {

        <span class="annotation">@Rule</span>
        <span class="directive">public</span> EntityManagerProvider emProvider = EntityManagerProvider.instance(<span class="string"><span class="delimiter">"</span><span class="content">rules-it</span><span class="delimiter">"</span></span>); 

        <span class="annotation">@Rule</span>
        <span class="directive">public</span> DBUnitRule dbUnitRule = DBUnitRule.instance(emProvider.connection()); 
        
<span class="comment">// end::declaration[] </span>

        <span class="annotation">@Test</span>
        <span class="directive">public</span> <span class="type">void</span> testMetaAnnotationOnClass() {
                <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
                assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
        }
        
        <span class="annotation">@Test</span>
        <span class="annotation">@AnotherMetaDataSet</span>
        <span class="directive">public</span> <span class="type">void</span> testMetaAnnotationOnMethod() {
                <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
                assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">1</span>);
        }
}
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test must use dataset declared in <code>MetaDataSet</code> annotation. <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_method_level_metadaset"><a class="anchor" href="#_method_level_metadaset"></a>9.2. Method level metadaset</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following metataset annotation <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="title">
             MetaDataSet.java 
           </div> 
           <div class="content"> 
            <pre>package com.github.database.rider.core.api.dataset;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;


@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE, ElementType.METHOD})
@DataSet(value = "yml/expectedUser.yml", disableConstraints = true)
public @interface AnotherMetaDataSet {

}</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(JUnit4.class)
<span class="annotation">@MetaDataSet</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MetaDataSetIt</span> {

        <span class="annotation">@Rule</span>
        <span class="directive">public</span> EntityManagerProvider emProvider = EntityManagerProvider.instance(<span class="string"><span class="delimiter">"</span><span class="content">rules-it</span><span class="delimiter">"</span></span>); 

        <span class="annotation">@Rule</span>
        <span class="directive">public</span> DBUnitRule dbUnitRule = DBUnitRule.instance(emProvider.connection()); 
        
<span class="comment">// end::declaration[] </span>

        <span class="annotation">@Test</span>
        <span class="directive">public</span> <span class="type">void</span> testMetaAnnotationOnClass() {
                <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
                assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">2</span>);
        }
        
        <span class="annotation">@Test</span>
        <span class="annotation">@AnotherMetaDataSet</span>
        <span class="directive">public</span> <span class="type">void</span> testMetaAnnotationOnMethod() {
                <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
                assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">1</span>);
        }
}
}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test must use dataset declared in <code>AnotherMetaDataSet</code> annotation. <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="DataSet-merging"><a class="anchor" href="#DataSet-merging"></a>10. <strong>DataSet merging</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('DataSet-merging');document.getElementById('hidden-DataSet-merging').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-DataSet-merging" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('DataSet-merging');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to reuse dataset configuration between test methods<br> As a developer<br> I want merge <code>class level</code> with <code>test level</code> dataset configuration</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Complete source code of examples below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/MergeDataSetsIt.java#L25" target="_blank" rel="noopener">found here</a>. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> See <a href="https://github.com/database-rider/database-rider/blob/master/rider-junit5/src/test/java/com/github/database/rider/junit5/MergeDataSetsJUnit5It.java#L20" target="_blank" rel="noopener">Rider JUnit5</a> and <a href="https://github.com/database-rider/database-rider/blob/master/rider-cdi/src/test/java/com/github/database/rider/cdi/MergeDataSetsCDIIt.java#L26" target="_blank" rel="noopener">CDI</a> examples. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_merging_datasets"><a class="anchor" href="#_merging_datasets"></a>10.1. Merging datasets</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following class level dataset configuration <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(JUnit4.class)
<span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/tweet.yml</span><span class="delimiter">"</span></span>, executeScriptsAfter = <span class="string"><span class="delimiter">"</span><span class="content">addUser.sql</span><span class="delimiter">"</span></span>, executeStatementsBefore = <span class="string"><span class="delimiter">"</span><span class="content">INSERT INTO USER VALUES (8,'user8')</span><span class="delimiter">"</span></span>)
<span class="annotation">@DBUnit</span>(mergeDataSets = <span class="predefined-constant">true</span>) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MergeDataSetsIt</span> {

}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Enables dataset merging so @DataSet declared on test class will be merged with test/method one.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The following test is executed: <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(value = <span class="string"><span class="delimiter">"</span><span class="content">yml/user.yml</span><span class="delimiter">"</span></span>, executeScriptsAfter = <span class="string"><span class="delimiter">"</span><span class="content">tweets.sql</span><span class="delimiter">"</span></span>, executeStatementsBefore = <span class="string"><span class="delimiter">"</span><span class="content">INSERT INTO USER VALUES (9,'user9')</span><span class="delimiter">"</span></span>, strategy = SeedStrategy.INSERT)
    <span class="directive">public</span> <span class="type">void</span> shouldMergeDataSetsFromClassAndMethod() {
        <span class="predefined-type">List</span>&lt;User&gt; users = em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u</span><span class="delimiter">"</span></span>).getResultList();
        assertThat(users).isNotNull().isNotEmpty().hasSize(<span class="integer">4</span>);  <span class="comment">//2 users from user.yml plus 1 from class level 'executeStatementsBefore' and 1 user from method level 'executeStatementsBefore'</span>

        User user = (User) em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u where u.id = 9</span><span class="delimiter">"</span></span>).getSingleResult();<span class="comment">//statement before at test level</span>
        assertThat(user).isNotNull();
        assertThat(user.getId()).isEqualTo(<span class="integer">9</span>);
        user = (User) em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u where u.id = 1</span><span class="delimiter">"</span></span>).getSingleResult();

        assertThat(user.getTweets()).isNotEmpty(); <span class="comment">//tweets comes from class level annotation merged with method level</span>
        assertThat(user.getTweets().get(<span class="integer">0</span>).getContent()).isEqualTo(<span class="string"><span class="delimiter">"</span><span class="content">dbunit rules again!</span><span class="delimiter">"</span></span>);
    }
    <span class="annotation">@AfterClass</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> afterTest() {
        User user = (User) em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u where u.id = 10</span><span class="delimiter">"</span></span>).getSingleResult();<span class="comment">//scripts after from class level dataset</span>
        assertThat(user).isNotNull();
        assertThat(user.getId()).isEqualTo(<span class="integer">10</span>);

        Tweet tweet = (Tweet) em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select t from Tweet t where t.id = 10</span><span class="delimiter">"</span></span>).getSingleResult();<span class="comment">//scripts after on test level</span>
        assertThat(tweet).isNotNull();
        assertThat(tweet.getId()).isEqualTo(<span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>);
    }

}</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>Test and method dataset configuration will be merged in one dataset <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="admonitionblock important"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> 
              <td class="content"> Only array properties such as <code>value</code> and <code>executeScriptsBefore</code> of @DataSet will be merged. </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="admonitionblock warning"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
              <td class="content"> Class level dataset configuration will come before method level if a property is defined in both datasets, like <code>executeStatementsBefore</code> in example above. </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> You can enable dataset merging for all tests with 'mergeDataSets=true` on <code>dbunit.yml</code> configuraton file. </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="sect1"> 
    <h2 id="DataSet-builder"><a class="anchor" href="#DataSet-builder"></a>11. <strong>DataSet builder</strong></h2> 
    <div class="sectionbody"> 
     <span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="Minimize" onclick="hideFeatureScenarios('DataSet-builder');document.getElementById('hidden-DataSet-builder').style.display = 'inline';this.style.display = 'none'"> </span> 
     <span id="hidden-DataSet-builder" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="Maximize feature" onclick="showFeatureScenarios('DataSet-builder');this.style.display = 'none'"> </span> 
     <div class="sidebarblock"> 
      <div class="content"> 
       <div class="exampleblock"> 
        <div class="content"> 
         <div class="quoteblock"> 
          <blockquote> 
           <div class="paragraph"> 
            <p>In order to create datasets programmatically<br> As a developer<br> I want to use <code>DatasetBuilder</code> API.</p> 
           </div> 
          </blockquote> 
         </div> 
        </div> 
       </div> 
       <div class="admonitionblock tip"> 
        <table> 
         <tbody> 
          <tr> 
           <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
           <td class="content"> Complete source code of examples below can be <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/DataSetProviderIt.java#L36" target="_blank" rel="noopener">found here</a>. </td> 
          </tr> 
         </tbody> 
        </table> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_create_dataset_using_dataset_builder"><a class="anchor" href="#_create_dataset_using_dataset_builder"></a>11.1. Create dataset using dataset builder</h3> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following method declaration <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(provider = UserDataSetProvider.class, <i class="conum" data-value="1"></i><b>(1)</b>
              cleanBefore = <span class="predefined-constant">true</span>)
    <span class="directive">public</span> <span class="type">void</span> shouldSeedDatabaseProgrammatically() {
        <span class="predefined-type">List</span>&lt;User&gt; users = EntityManagerProvider.em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u </span><span class="delimiter">"</span></span>).getResultList();
        assertThat(users).
            isNotNull().
            isNotEmpty().hasSize(<span class="integer">2</span>).
            extracting(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>).
            contains(<span class="string"><span class="delimiter">"</span><span class="content">@dbunit</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">@dbrider</span><span class="delimiter">"</span></span>);
    }</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td><code>provider</code> attribute expects a class which implements DataSetProvider interface.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following dataset provider implementation <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">UserDataSetProvider</span> <span class="directive">implements</span> DataSetProvider {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> IDataSet provide() {
            DataSetBuilder builder = <span class="keyword">new</span> DataSetBuilder();
            builder.table(<span class="string"><span class="delimiter">"</span><span class="content">user</span><span class="delimiter">"</span></span>)<i class="conum" data-value="1"></i><b>(1)</b>
                    .row() <i class="conum" data-value="2"></i><b>(2)</b>
                        .column(<span class="string"><span class="delimiter">"</span><span class="content">id</span><span class="delimiter">"</span></span>, <span class="integer">1</span>) <i class="conum" data-value="3"></i><b>(3)</b>
                        .column(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">@dbunit</span><span class="delimiter">"</span></span>)
                    .row() <i class="conum" data-value="4"></i><b>(4)</b>
                        .column(<span class="string"><span class="delimiter">"</span><span class="content">id</span><span class="delimiter">"</span></span>, <span class="integer">2</span>)
                        .column(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">@dbrider</span><span class="delimiter">"</span></span>);
            <span class="keyword">return</span> builder.build(); <i class="conum" data-value="5"></i><b>(5)</b>
        }
    }</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Starts a table on current dataset</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Starts creating a row for current table</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>Adds a column witn name <code>id</code> and value <code>1</code> to current row</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="4"></i><b>4</b></td> 
              <td>Starts creating another row for table <code>user</code></td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="5"></i><b>5</b></td> 
              <td>creates the dataset.</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> For more complex examples of programmatic dataset creation, <a href="https://github.com/database-rider/database-rider/blob/master/rider-core/src/test/java/com/github/database/rider/core/dataset/builder/DatasetBuilderTest.java#L27" target="_blank" rel="noopener">see here</a>. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The test is executed <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The following dataset will be used for seeding the database <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>USER:
 - ID: 1
   NAME: "@dbunit"
 - ID: 2
   NAME: "@dbrider"</pre> 
           </div> 
          </div> 
          <div class="admonitionblock tip"> 
           <table> 
            <tbody> 
             <tr> 
              <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>You can use <a href="#DataSet-export">DataSet export</a> to generate <code>DatasetBuilder</code> code, for that just set <code>builderType</code> property in <code>@ExportDataSet</code>, ex:</p> 
               </div> 
               <div class="listingblock"> 
                <div class="content"> 
                 <pre class="CodeRay highlight"><code data-lang="java">   <span class="annotation">@Test</span>
   <span class="annotation">@DataSet</span>(<span class="string"><span class="delimiter">"</span><span class="content">datasets/yml/users.yml</span><span class="delimiter">"</span></span>)
   <span class="annotation">@ExportDataSet</span>(format = DataSetFormat.XML, outputName = <span class="string"><span class="delimiter">"</span><span class="content">target/exported/xml/AllTables.xml</span><span class="delimiter">"</span></span>, builderType = BuilderType.DEFAULT)
   <span class="directive">public</span> <span class="type">void</span> shouldExportDataSetAsBuilderInDefaultSyntax() {
       <span class="comment">//AllTables.java file containing DataSetBuilder code will be generated along with AllTables.xml file.</span>
   }</code></pre> 
                </div> 
               </div> </td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> yaml format is used only for illustration here, when using DatasetBuilder the dataset is only created in memory, it is not materialized in any file (unless it is <a href="#DataSet-export">exported</a>). </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
     <div class="sect2"> 
      <h3 id="_create_dataset_using_dataset_builder_with_columnvalues_syntax"><a class="anchor" href="#_create_dataset_using_dataset_builder_with_columnvalues_syntax"></a>11.2. Create dataset using dataset builder with <code>column…​values</code> syntax</h3> 
      <div class="paragraph"> 
       <p><code>DataSetBuilder</code> has an alternative syntax, similar to SQL <code>insert into values</code>, which may be more appropriated to datasets with <strong>few columns</strong> and <strong>lot of rows</strong>.</p> 
      </div> 
      <div class="exampleblock"> 
       <div class="content"> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            Given 
          </dt> 
          <dd> 
           <p>The following method declaration <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">    <span class="annotation">@Test</span>
    <span class="annotation">@DataSet</span>(provider = UserDataSetProviderWithColumnsSyntax.class)
    <span class="directive">public</span> <span class="type">void</span> shouldSeedDatabaseUsingDataSetProviderWithColumnsSyntax() {
        <span class="predefined-type">List</span>&lt;User&gt; users = EntityManagerProvider.em().createQuery(<span class="string"><span class="delimiter">"</span><span class="content">select u from User u </span><span class="delimiter">"</span></span>).getResultList();
        assertThat(users).
                isNotNull().
                isNotEmpty().hasSize(<span class="integer">2</span>).
                extracting(<span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>).
                contains(<span class="string"><span class="delimiter">"</span><span class="content">@dbunit</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">@dbrider</span><span class="delimiter">"</span></span>);
    }</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            And 
          </dt> 
          <dd> 
           <p>The following dataset provider implementation <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java">    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">UserDataSetProviderWithColumnsSyntax</span> <span class="directive">implements</span> DataSetProvider {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> IDataSet provide() {
            DataSetBuilder builder = <span class="keyword">new</span> DataSetBuilder();
            IDataSet iDataSet = builder.table(<span class="string"><span class="delimiter">"</span><span class="content">user</span><span class="delimiter">"</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>
                    .columns(<span class="string"><span class="delimiter">"</span><span class="content">id</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">name</span><span class="delimiter">"</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>
                    .values(<span class="integer">1</span>,<span class="string"><span class="delimiter">"</span><span class="content">@dbunit</span><span class="delimiter">"</span></span>) <i class="conum" data-value="3"></i><b>(3)</b>
                    .values(<span class="integer">2</span>,<span class="string"><span class="delimiter">"</span><span class="content">@dbrider</span><span class="delimiter">"</span></span>).build();
            <span class="keyword">return</span> iDataSet;
        }
    }</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody> 
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>Starts a table on current dataset</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>Declares columns involved in current dataset</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="3"></i><b>3</b></td> 
              <td>specify values for each column</td> 
             </tr> 
            </tbody> 
           </table> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> The columns are specified only one time and the values are 'index' based (first value refers to first column. </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
        <div class="dlist"> 
         <dl> 
          <dt class="hdlist1">
            When 
          </dt> 
          <dd> 
           <p>The test is executed <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
          <dt class="hdlist1">
            Then 
          </dt> 
          <dd> 
           <p>The following dataset will be used for seeding the database <span class="icon green"><i class="fa fa-thumbs-up" title="Passed"></i></span></p> 
          </dd> 
         </dl> 
        </div> 
        <div class="sidebarblock"> 
         <div class="content"> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre>USER:
 - ID: 1
   NAME: "@dbunit"
 - ID: 2
   NAME: "@dbrider"</pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody> 
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> yaml format is used only for illustration here, when using DatasetBuilder the dataset is only created in memory, it is not materialized in any file (unless it is <a href="#DataSet-export">exported</a>). </td> 
           </tr> 
          </tbody> 
         </table> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div id="footnotes"> 
   <hr> 
   <div class="footnote" id="_footnotedef_1"> 
    <a href="#_footnoteref_1">1</a>. 
    <a href="http://docs.oracle.com/javaee/6/tutorial/doc/giwhb.html" target="_blank" rel="noopener">Contexts and dependency for the Java EE</a> 
   </div> 
   <div class="footnote" id="_footnotedef_2"> 
    <a href="#_footnoteref_2">2</a>. Scripting for the Java Platform, for more information access the official 
    <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/scripting/prog_guide/api.html" target="_blank" rel="noopener">docs here</a> 
   </div> 
  </div> 
  <div id="footer" style="color:gray;font-size:11px">
    Generated by 
   <a href="https://github.com/rmpestano/cukedoctor" target="_blank"> Cukedoctor 3.9.0</a> - Oct 27, 2024, 8:09:31 PM 
   <span style="float:right;font-size:11px"> Execution time: 5.453 seconds</span> 
  </div> 
  <style>  

#content:padding:0!important;
.sidebarblock, .sectionbody, .content{
overflow:auto!important;
}
div.sidebarblock {overflow-y:hidden;overflow-x:auto}
 body .exampleblock > .content{ background:#fff}</style> 
  <script type="text/javascript">  

document.addEventListener("DOMContentLoaded", function(event) { 
  themefy();
});
	function themefy() {
 						var theme = getThemeFromQueryParameters() || 'asciidoctor';
 						var themeLink = document.createElement('link');
					 if('asciidoctor' !== theme) { 						themeLink.rel = 'stylesheet';
 						themeLink.id = 'asciidoctor-style';
 						themeLink.href = 'themes/' + theme + '.css';
 						 document.head.appendChild(themeLink);
				 }}


	function getThemeFromQueryParameters() {
		var query = location.search.substr(1);
		var result = 'asciidoctor';
	query.split("&").forEach(function (part) {
				// part can be empty
				if (part) {
					var item = part.split("=");
					var key = item[0];
				var value = item[1];
				if (typeof value !== 'undefined') {
						if(key == 'theme'){
								result = value;
								}
			}
		}
 	});
	if(!result){
		result = 'asciidoctor';
		
	}
	document.getElementById('themes').value = result;  
	var els = document.querySelector('select[name="select"] option[value="' + result + '"]');  
	if(els){
    els.selected = true;
	}	return result;
}
 
</script> 
  <script type="text/javascript">
function showFeatureScenarios(featureId){
		var element = document.getElementById(featureId).parentNode;
		for (var i = 0; i < element.childNodes.length; i++) {
    		if (element.childNodes[i].className == "sectionbody") {
		     var secChild = element.childNodes[i];	
		     for (var j = 0; j < secChild.childNodes.length; j++) {
                             if(secChild.childNodes[j].className == "sect2" || secChild.childNodes[j].className == "sectionbody" ||  secChild.childNodes[j].className == "fa fa-minus-square fa-fw") {
	      		     secChild.childNodes[j].style.display = 'inline';
			 }
			if (secChild.childNodes[j].className == "sidebarblock") {
      		             secChild.childNodes[j].style.display = 'block';
    			   }
			}	
    		 }
    					        
		}
		 
 		document.getElementById(featureId).children[0].click();
	}

	function hideFeatureScenarios(featureId){
		var element = document.getElementById(featureId).parentNode;
		for (var i = 0; i < element.childNodes.length; i++) {
		if (element.childNodes[i].className == "sectionbody") {
		    var secChild = element.childNodes[i];
                     for (var j = 0; j < secChild.childNodes.length; j++) {
                             if(secChild.childNodes[j].className == "sect2" || secChild.childNodes[j].className == "sectionbody" || secChild.childNodes[j].className == "sidebarblock") {
	      		     secChild.childNodes[j].style.display = 'none';
			 }
			}
                   }	
     
		}
	   document.getElementById(featureId).children[0].click();
 	}</script> 
  <script type="text/javascript">
var allLevel2ListItems = null;

function searchFeature(criteria) {
    if (criteria != null && criteria.length >= 3) {
        var sect1List = document.getElementsByClassName("sect1");
        var firstMatch = null;
        if (sect1List != null) {
            for (var i = 0; i < sect1List.length; i++) {
                var h3 = null;
                for (var j = 0; j < sect1List[i].childNodes.length; j++) {
                    if (sect1List[i].childNodes[j].tagName && sect1List[i].childNodes[j].tagName.toUpperCase() == "H2") {
                        h3 = sect1List[i].childNodes[j];
                        break;
                    }
                }
                if (h3 != null && h3.id != null) {
                    if (h3.id.toLowerCase().replaceAll('-',' ').indexOf(criteria.toLowerCase()) == -1) {
                        sect1List[i].style.display = 'none';
                    } else {//match
                        sect1List[i].style.display = 'inline';
                        if (firstMatch == null) {
                            //used to scroll to after search
                            firstMatch = h3;
                        }
                        //filter toc
                        filterToc(criteria);
                    }
                }
            }//end for

        }//sect1List != null
        if (firstMatch != null) {
            animate(document.body, "scrollTop", "", 0, firstMatch.offsetTop, 200, true);
        }


    }//end criteria.length >=3
    else {//clear search
        clearSearch();
    }
}

function clearSearch() {
    var sect1List = document.getElementsByClassName("sect1");
    if (sect1List != null) {
        for (var i = 0; i < sect1List.length; i++) {
            sect1List[i].style.display = 'inline';
        }//end for
    }//end elements != null

    if (allLevel2ListItems == null) {
        collectallLevel2IListItens();
    }
    for (var z = 0; z < allLevel2ListItems.length; z++) {
        allLevel2ListItems[z].style.display = 'inline';
    }
    if (document.getElementById('input-search')) {
        document.getElementById('input-search').value = 'Filter...';
    }
}

function filterToc(criteria) {
    if (allLevel2ListItems == null) {
        collectallLevel2IListItens();
    }
    for (var z = 0; z < allLevel2ListItems.length; z++) {
        if (allLevel2ListItems[z].childNodes[0].tagName && allLevel2ListItems[z].childNodes[0].tagName.toLowerCase() == "a") {
            if (allLevel2ListItems[z].childNodes[0].getAttribute("href").toLowerCase().replaceAll('-',' ').substring(1).indexOf(criteria.toLowerCase()) !== -1) {
                allLevel2ListItems[z].style.display = 'inline';
            } else {
                allLevel2ListItems[z].style.display = 'none';
            }
        }
    }//end for allListItens
}

function animate(elem, style, unit, from, to, time, prop) {
    if (!elem) return;
    var start = new Date().getTime(),
        timer = setInterval(function () {
            var step = Math.min(1, (new Date().getTime() - start) / time);
            if (prop) {
                elem[style] = (from + step * (to - from)) + unit;
            } else {
                elem.style[style] = (from + step * (to - from)) + unit;
            }
            if (step == 1) clearInterval(timer);
        }, 25);
    elem.style[style] = from + unit;
}

function collectallLevel2IListItens() {
    allLevel2ListItems = new Array();
    var uls = document.getElementsByClassName('sectlevel1');
    for (var i = 0; i < uls.length; i++) {
        for (var j = 0; j < uls[i].childNodes.length; j++) {
            if (uls[i].childNodes[j].tagName) {
                if (uls[i].childNodes[j].tagName.toLowerCase() == 'li') {
                    allLevel2ListItems.push(uls[i].childNodes[j]);
                }

            }


        } //end for uls child
    }//end for uls

}
</script>  
 </body>
</html>